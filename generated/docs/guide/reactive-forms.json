{
  "id": "guide/reactive-forms",
  "title": "响应式表单",
  "contents": "\n<div class=\"content\">\n<h1 translation-origin=\"off\" id=\"reactive-forms\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#reactive-forms\"><i class=\"material-icons\">link</i></a>Reactive Forms</h1>\n<h1 translation-result=\"\" id=\"响应式表单\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#响应式表单\"><i class=\"material-icons\">link</i></a>响应式表单</h1>\n<p translation-origin=\"off\"><em>Reactive forms</em> is an Angular technique for creating forms in a <em>reactive</em> style.\nThis guide explains reactive forms as you follow the steps to build a \"Hero Detail Editor\" form.</p>\n<p translation-result=\"\"><em>响应式表单</em>是Angular中用<em>响应式</em>风格创建表单的技术。\n本章中，我们会在构建“英雄详情编辑器”的过程中，逐步讲解响应式表单的概念。</p>\n<a id=\"toc\"></a>\n<p translation-origin=\"off\">Try the <live-example plnkr=\"final\" title=\"Reactive Forms (final) in Plunker\">Reactive Forms live-example</live-example>.</p>\n<p translation-result=\"\">试试<live-example plnkr=\"final\" title=\"Reactive Forms (final) in Plunker\">响应式表单的在线例子</live-example>。</p>\n<p translation-origin=\"off\">You can also run the <live-example title=\"Reactive Forms Demo in Plunker\">Reactive Forms Demo</live-example> version\nand choose one of the intermediate steps from the \"demo picker\" at the top.</p>\n<p translation-result=\"\">你还可以运行<live-example title=\"Reactive Forms Demo in Plunker\">响应式表单的演示程序</live-example>，并从顶部选取一个中间步骤。</p>\n<a id=\"intro\"></a>\n<h2 translation-origin=\"off\" id=\"introduction-to-reactive-forms\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#introduction-to-reactive-forms\"><i class=\"material-icons\">link</i></a>Introduction to Reactive Forms</h2>\n<h2 translation-result=\"\" id=\"响应式表单简介\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#响应式表单简介\"><i class=\"material-icons\">link</i></a>响应式表单简介</h2>\n<p translation-origin=\"off\">Angular offers two form-building technologies: <em>reactive</em> forms and <em>template-driven</em> forms.\nThe two technologies belong to the <code>@angular/forms</code> library\nand share a common set of form control classes.</p>\n<p translation-result=\"\">Angular提供了两种构建表单的技术：<em>响应式</em>表单和<em>模板驱动</em>表单。\n这两项技术都属于<code>@angular/forms</code>库，并且共享一组公共的表单控件类。</p>\n<p translation-origin=\"off\">But they diverge markedly in philosophy, programming style, and technique.\nThey even have their own modules: the <code><a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a></code> and the <code><a href=\"api/forms/FormsModule\" class=\"code-anchor\">FormsModule</a></code>.</p>\n<p translation-result=\"\">但是它们在设计哲学、编程风格和具体技术上有显著区别。\n所以，它们都有自己的模块：<code><a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a></code> 和 <code><a href=\"api/forms/FormsModule\" class=\"code-anchor\">FormsModule</a></code>。</p>\n<h3 translation-origin=\"off\" id=\"reactive-forms-1\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#reactive-forms-1\"><i class=\"material-icons\">link</i></a><em>Reactive</em> forms</h3>\n<h3 translation-result=\"\" id=\"响应式表单-1\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#响应式表单-1\"><i class=\"material-icons\">link</i></a><em>响应式</em>表单</h3>\n<p translation-origin=\"off\">Angular <em>reactive</em> forms facilitate a <em>reactive style</em> of programming\nthat favors explicit management of the data flowing between\na non-UI <em>data model</em> (typically retrieved from a server) and a\nUI-oriented <em>form model</em> that retains the states\nand values of the HTML controls on screen. Reactive forms offer the ease\nof using reactive patterns, testing, and validation.</p>\n<p translation-result=\"\">Angular的<em>响应式</em>表单能让实现<em>响应式编程风格</em>更容易，这种编程风格更倾向于在非UI的<em>数据模型</em>（通常接收自服务器）之间显式的管理数据流，\n并且用一个UI导向的<em>表单模型</em>来保存屏幕上HTML控件的状态和值。\n响应式表单可以让使用响应式编程模式、测试和校验变得更容易。</p>\n<p translation-origin=\"off\">With <em>reactive</em> forms, you create a tree of Angular form control objects\nin the component class and bind them to native form control elements in the\ncomponent template, using techniques described in this guide.</p>\n<p translation-result=\"\">使用<em>响应式</em>表单，我们可以在组件中创建表单控件的对象树，并使用本章中传授的技巧把它们绑定到组件模板中的原生表单控件元素上。</p>\n<p translation-origin=\"off\">You create and manipulate form control objects directly in the\ncomponent class. As the component class has immediate access to both the data\nmodel and the form control structure, you can push data model values into\nthe form controls and pull user-changed values back out. The component can\nobserve changes in form control state and react to those changes.</p>\n<p translation-result=\"\">我们可以在组件类中直接创建和维护表单控件对象。由于组件类可以同时访问数据模型和表单控件结构，\n因此我们可以把表单模型值的变化推送到表单控件中，并把变化后的值拉取回来。\n组件可以监听表单控件状态的变化，并对此做出响应。</p>\n<p translation-origin=\"off\">One advantage of working with form control objects directly is that value and validity updates\nare <a href=\"guide/reactive-forms#async-vs-sync\" title=\"Async vs sync\">always synchronous and under your control</a>.\nYou won't encounter the timing issues that sometimes plague a template-driven form\nand reactive forms can be easier to unit test.</p>\n<p translation-result=\"\">直接使用表单控件对象的优点之一是值和有效性状态的更新<a href=\"guide/reactive-forms#async-vs-sync\" title=\"Async vs sync\">总是同步的，并且在你的控制之下</a>。\n我们不会遇到时序问题，这个问题有时在模板驱动表单中会成为灾难。而且响应式表单更容易进行单元测试。</p>\n<p translation-origin=\"off\">In keeping with the reactive paradigm, the component\npreserves the immutability of the <em>data model</em>,\ntreating it as a pure source of original values.\nRather than update the data model directly,\nthe component extracts user changes and forwards them to an external component or service,\nwhich does something with them (such as saving them)\nand returns a new <em>data model</em> to the component that reflects the updated model state.</p>\n<p translation-result=\"\">在响应式编程范式中，组件会负责维护<em>数据模型</em>的不可变性，把模型当做纯粹的原始数据源。\n组件不会直接更新数据模型，而是把用户的修改提取出来，把它们转发给外部的组件或服务，外部程序才会使用这些进行处理（比如保存它们），\n并且给组件返回一个新的<em>数据模型</em>，以反映模型状态的变化。</p>\n<p translation-origin=\"off\">Using reactive form directives does not require you to follow all reactive priniciples,\nbut it does facilitate the reactive programming approach should you choose to use it.</p>\n<p translation-result=\"\">使用响应式表单的指令，并不要求你遵循所有的响应式编程原则，但它能让你更容易使用响应式编程方法，从而更愿意使用它。</p>\n<h3 translation-origin=\"off\" id=\"template-driven-forms\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#template-driven-forms\"><i class=\"material-icons\">link</i></a><em>Template-driven</em> forms</h3>\n<h3 translation-result=\"\" id=\"模板驱动表单\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#模板驱动表单\"><i class=\"material-icons\">link</i></a><em>模板驱动</em>表单</h3>\n<p translation-origin=\"off\"><em>Template-driven</em> forms, introduced in the <a href=\"guide/forms\">Template guide</a>, take a completely different approach.</p>\n<p translation-result=\"\">在<a href=\"guide/forms\">模板</a>一章我们介绍过的<em>模板驱动</em>表单，是一种完全不同的方式。</p>\n<p translation-origin=\"off\">You place HTML form controls (such as <code>&#x3C;input></code> and <code>&#x3C;select></code>) in the component template and\nbind them to <em>data model</em> properties in the component, using directives\nlike <code><a href=\"api/forms/NgControlStatus\" class=\"code-anchor\">ngModel</a></code>.</p>\n<p translation-result=\"\">我们把HTML表单控件（比如<code>&#x3C;input></code>和<code>&#x3C;select></code>）放进组件模板中，并用<code><a href=\"api/forms/NgControlStatus\" class=\"code-anchor\">ngModel</a></code>等指令把它们绑定到组件中<em>数据模型</em>的属性上。</p>\n<p translation-origin=\"off\">You don't create Angular form control objects. Angular directives\ncreate them for you, using the information in your data bindings.\nYou don't push and pull data values. Angular handles that for you with <code><a href=\"api/forms/NgControlStatus\" class=\"code-anchor\">ngModel</a></code>.\nAngular updates the mutable <em>data model</em> with user changes as they happen.</p>\n<p translation-result=\"\">我们不用自己创建Angular表单控件对象。Angular指令会使用数据绑定中的信息创建它们。\n我们不用自己推送和拉取数据。Angular使用<code><a href=\"api/forms/NgControlStatus\" class=\"code-anchor\">ngModel</a></code>来替你管理它们。\n当用户做出修改时，Angular会据此更新可变的<em>数据模型</em>。</p>\n<p translation-origin=\"off\">For this reason, the <code><a href=\"api/forms/NgControlStatus\" class=\"code-anchor\">ngModel</a></code> directive is not part of the ReactiveFormsModule.</p>\n<p translation-result=\"\">因此，<code><a href=\"api/forms/NgControlStatus\" class=\"code-anchor\">ngModel</a></code>并不是<code><a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a></code>模块的一部分。</p>\n<p translation-origin=\"off\">While this means less code in the component class,\n<a href=\"guide/reactive-forms#async-vs-sync\" title=\"Async vs sync\">template-driven forms are asynchronous</a>\nwhich may complicate development in more advanced scenarios.</p>\n<p translation-result=\"\">虽然这意味着组件中的代码更少，但是<a href=\"guide/reactive-forms#async-vs-sync\" title=\"Async vs sync\">模板驱动表单是异步工作的</a>，这可能在更高级的场景中让开发复杂化。</p>\n<a id=\"async-vs-sync\"></a>\n<h3 translation-origin=\"off\" id=\"async-vs-sync\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#async-vs-sync\"><i class=\"material-icons\">link</i></a>Async vs. sync</h3>\n<h3 translation-result=\"\" id=\"异步-vs-同步\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#异步-vs-同步\"><i class=\"material-icons\">link</i></a>异步 vs. 同步</h3>\n<p translation-origin=\"off\">Reactive forms are synchronous. Template-driven forms are asynchronous. It's a difference that matters.</p>\n<p translation-result=\"\">响应式表单是同步的。模板驱动表单是异步的。这个不同点很重要。</p>\n<p translation-origin=\"off\">In reactive forms, you create the entire form control tree in code.\nYou can immediately update a value or drill down through the descendents of the parent form\nbecause all controls are always available.</p>\n<p translation-result=\"\">使用响应式表单，我们会在代码中创建整个表单控件树。\n我们可以立即更新一个值或者深入到表单中的任意节点，因为所有的控件都始终是可用的。</p>\n<p translation-origin=\"off\">Template-driven forms delegate creation of their form controls to directives.\nTo avoid \"<em>changed after checked</em>\" errors,\nthese directives take more than one cycle to build the entire control tree.\nThat means you must wait a tick before manipulating any of the controls\nfrom within the component class.</p>\n<p translation-result=\"\">模板驱动表单会委托指令来创建它们的表单控件。\n为了消除“检查完后又变化了”的错误，这些指令需要消耗一个以上的变更检测周期来构建整个控件树。\n这意味着在从组件类中操纵任何控件之前，我们都必须先等待一个节拍。</p>\n<p translation-origin=\"off\">For example, if you inject the form control with a <code>@<a href=\"api/core/ViewChild\" class=\"code-anchor\">ViewChild</a>(<a href=\"api/forms/NgForm\" class=\"code-anchor\">NgForm</a>)</code> query and examine it in the\n<a href=\"guide/lifecycle-hooks#afterview\" title=\"Lifecycle hooks guide: AfterView\"><code>ngAfterViewInit</code> lifecycle hook</a>,\nyou'll discover that it has no children.\nYou must wait a tick, using <code>setTimeout</code>, before you can\nextract a value from a control, test its validity, or set it to a new value.</p>\n<p translation-result=\"\">比如，如果我们用<code>@<a href=\"api/core/ViewChild\" class=\"code-anchor\">ViewChild</a>(<a href=\"api/forms/NgForm\" class=\"code-anchor\">NgForm</a>)</code>查询来注入表单控件，并在<a href=\"guide/lifecycle-hooks#afterview\" title=\"Lifecycle hooks guide: AfterView\">生命周期钩子<code>ngAfterViewInit</code></a>中检查它，就会发现它没有子控件。\n我们必须使用<code>setTimeout</code>等待一个节拍才能从控件中提取值、测试有效性，或把它设置为新值。</p>\n<p translation-origin=\"off\">The asynchrony of template-driven forms also complicates unit testing.\nYou must wrap your test block in <code>async()</code> or <code><a href=\"api/core/testing/fakeAsync\" class=\"code-anchor\">fakeAsync</a>()</code> to\navoid looking for values in the form that aren't there yet.\nWith reactive forms, everything is available when you expect it to be.</p>\n<p translation-result=\"\">模板驱动表单的异步性让单元测试也变得复杂化了。\n我们必须把测试代码包裹在<code>async()</code>或<code><a href=\"api/core/testing/fakeAsync\" class=\"code-anchor\">fakeAsync</a>()</code>中来解决要查阅的值尚不存在的情况。\n使用响应式表单，在所期望的时机一切都是可用的。</p>\n<h3 translation-origin=\"off\" id=\"which-is-better-reactive-or-template-driven\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#which-is-better-reactive-or-template-driven\"><i class=\"material-icons\">link</i></a>Which is better, reactive or template-driven?</h3>\n<h3 translation-result=\"\" id=\"哪一个更好？响应式还是模板驱动？\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#哪一个更好？响应式还是模板驱动？\"><i class=\"material-icons\">link</i></a>哪一个更好？响应式还是模板驱动？</h3>\n<p translation-origin=\"off\">Neither is \"better\".\nThey're two different architectural paradigms,\nwith their own strengths and weaknesses.\nChoose the approach that works best for you.\nYou may decide to use both in the same application.</p>\n<p translation-result=\"\">没有哪个“更好”。\n它们是两种架构范式，各有优缺点。\n请自行选择更合适的方法，甚至可以在同一个应用中同时使用它们。</p>\n<p translation-origin=\"off\">The balance of this <em>reactive forms</em> guide explores the <em>reactive</em> paradigm and\nconcentrates exclusively on reactive forms techniques.\nFor information on <em>template-driven forms</em>, see the <a href=\"guide/forms\"><em>Forms</em></a> guide.</p>\n<p translation-result=\"\">在这章<em>响应式表单</em>中，我们只专注于<em>响应式</em>范式以及响应式表单技术的详情。</p>\n<p translation-origin=\"off\">In the next section, you'll set up your project for the reactive form demo.\nThen you'll learn about the <a href=\"guide/reactive-forms#essentials\">Angular form classes</a> and how to use them in a reactive form.</p>\n<p translation-result=\"\">在下一节，我们将先准备一个响应式表单范例的项目，然后就可以开始学习<a href=\"guide/reactive-forms#essentials\">Angular表单类</a>，并在响应式表单中使用它们了。</p>\n<a id=\"setup\"></a>\n<h2 translation-origin=\"off\" id=\"setup\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#setup\"><i class=\"material-icons\">link</i></a>Setup</h2>\n<h2 translation-result=\"\" id=\"准备工作\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#准备工作\"><i class=\"material-icons\">link</i></a>准备工作</h2>\n<p translation-origin=\"off\">Follow the steps in the <a href=\"guide/setup\" title=\"Setup guide\"><em>Setup</em> guide</a>\nfor creating a new project folder (perhaps called <code>reactive-forms</code>)\nbased on the <em>QuickStart seed</em>.</p>\n<p translation-result=\"\">遵循<a href=\"guide/setup\" title=\"Setup guide\"><em>准备工作</em>一章</a>中的步骤基于<em>快速起步种子工程</em>创建一个新的项目目录（比如叫<code>reactive-forms</code>）。 </p>\n<a id=\"data-model\"></a>\n<h2 translation-origin=\"off\" id=\"create-a-data-model\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#create-a-data-model\"><i class=\"material-icons\">link</i></a>Create a data model</h2>\n<h2 translation-result=\"\" id=\"创建数据模型\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#创建数据模型\"><i class=\"material-icons\">link</i></a>创建数据模型</h2>\n<p translation-origin=\"off\">The focus of this guide is a reactive forms component that edits a hero.\nYou'll need a <code>hero</code> class and some hero data.\nCreate a new <code>data-model.ts</code> file in the <code>app</code> directory and copy the content below into it.</p>\n<p translation-result=\"\">本章的焦点是响应式表单组件以及编辑一个英雄。\n我们需要一个<code>Hero</code>类和一些英雄数据。\n在<code>app</code>目录下创建一个<code>data-model.ts</code>文件，并粘贴进下列内容：</p>\n<code-example path=\"reactive-forms/src/app/data-model.ts\" title=\"src/app/data-model.ts\" linenums=\"false\">\nexport class Hero {\n  id = 0;\n  name = '';\n  addresses: Address[];\n}\n\nexport class Address {\n  street = '';\n  city   = '';\n  state  = '';\n  zip    = '';\n}\n\nexport const heroes: Hero[] = [\n  {\n    id: 1,\n    name: 'Whirlwind',\n    addresses: [\n      {street: '123 Main',  city: 'Anywhere', state: 'CA',  zip: '94801'},\n      {street: '456 Maple', city: 'Somewhere', state: 'VA', zip: '23226'},\n    ]\n  },\n  {\n    id: 2,\n    name: 'Bombastic',\n    addresses: [\n      {street: '789 Elm',  city: 'Smallville', state: 'OH',  zip: '04501'},\n    ]\n  },\n  {\n    id: 3,\n    name: 'Magneta',\n    addresses: [ ]\n  },\n];\n\nexport const states = ['CA', 'MD', 'OH', 'VA'];\n\n\n</code-example>\n<p translation-origin=\"off\">The file exports two classes and two constants. The <code>Address</code>\nand <code>Hero</code> classes define the application <em>data model</em>.\nThe <code>heroes</code> and <code>states</code> constants supply the test data.</p>\n<p translation-result=\"\">这个文件导出两个类和两个常量。<code>Address</code>和<code>Hero</code>类定义应用的<em>数据模型</em>。\n<code>heroes</code>和<code>states</code>常量提供测试数据。</p>\n<a id=\"create-component\"></a>\n<h2 translation-origin=\"off\" id=\"create-a-reactive-forms-component\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#create-a-reactive-forms-component\"><i class=\"material-icons\">link</i></a>Create a <em>reactive forms</em> component</h2>\n<h2 translation-result=\"\" id=\"创建响应式表单组件\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#创建响应式表单组件\"><i class=\"material-icons\">link</i></a>创建<em>响应式表单</em>组件</h2>\n<p translation-origin=\"off\">Make a new file called\n<code>hero-detail.component.ts</code> in the <code>app</code> directory and import these symbols:</p>\n<p translation-result=\"\">在<code>app</code>目录下创建一个名叫<code>hero-detail.component.ts</code>的新文件，并且导入下列符号：</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-1.component.ts\" region=\"imports\" title=\"src/app/hero-detail.component.ts\" linenums=\"false\">\nimport { <a href=\"api/core/Component\" class=\"code-anchor\">Component</a> }              from '@angular/core';\nimport { <a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a> }            from '@angular/forms';\n\n</code-example>\n<p translation-origin=\"off\">Now enter the <code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a></code> decorator that specifies the <code>HeroDetailComponent</code> metadata:</p>\n<p translation-result=\"\">然后输入这个<code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a></code>来为<code>HeroDetailComponent</code>指定元数据：</p>\n<code-example path=\"reactive-forms/src/app/hero-detail.component.ts\" region=\"metadata\" title=\"src/app/hero-detail.component.ts (excerpt)\" linenums=\"false\">\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-hero-detail',\n  templateUrl: './hero-detail.component.html'\n})\n\n</code-example>\n<p translation-origin=\"off\">Next, create an exported <code>HeroDetailComponent</code> class with a <code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>.\n<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code> is a directive that allows you to create and manage\na <code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code> instance directly.</p>\n<p translation-result=\"\">接下来，创建并导出一个带<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>的<code>HeroDetailComponent</code>类。\n<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>是一个指令，它允许我们直接创建并管理一个<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>实例。</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-1.component.ts\" region=\"v1\" title=\"src/app/hero-detail.component.ts (excerpt)\" linenums=\"false\">\nexport class HeroDetailComponent1 {\n  name = new <a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a>();\n}\n\n\n</code-example>\n<p translation-origin=\"off\">Here you are creating a <code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code> called <code>name</code>.\nIt will be bound in the template to an HTML <code>input</code> box for the hero name.</p>\n<p translation-result=\"\">这里我们创建了一个名叫<code>name</code>的<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>。\n它将会绑定到模板中的一个<code>input</code>框，表示英雄的名字。</p>\n<p translation-origin=\"off\">A <code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code> constructor accepts three, optional arguments:\nthe initial data value, an array of validators, and an array of async validators.</p>\n<p translation-result=\"\"><code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>构造函数接收三个可选参数：\n初始值、验证器数组和异步验证器数组。</p>\n<p translation-origin=\"off\">This simple control doesn't have data or validators.\nIn real apps, most form controls have both.</p>\n<p translation-result=\"\">最简单的控件并不需要数据或验证器，但是在实际应用中，大部分表单控件都会同时具备它们。</p>\n<div class=\"l-sub-section\">\n<p translation-origin=\"off\">This guide touches only briefly on <code><a href=\"api/forms/Validators\" class=\"code-anchor\">Validators</a></code>. For an in-depth look at them,\nread the <a href=\"guide/form-validation\">Form Validation</a> guide.</p>\n<p translation-result=\"\">本章中只会接触<code><a href=\"api/forms/Validators\" class=\"code-anchor\">Validators</a></code>中的一点点，要想更深入的了解它们，请阅读烹饪宝典中的<a href=\"guide/form-validation\">表单验证</a>一章。</p>\n</div>\n<a id=\"create-template\"></a>\n<h2 translation-origin=\"off\" id=\"create-the-template\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#create-the-template\"><i class=\"material-icons\">link</i></a>Create the template</h2>\n<h2 translation-result=\"\" id=\"创建模板\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#创建模板\"><i class=\"material-icons\">link</i></a>创建模板</h2>\n<p translation-origin=\"off\">Now create the component's template, <code>src/app/hero-detail.component.html</code>, with the following markup.</p>\n<p translation-result=\"\">现在，在创建组件的模板文件<code>src/app/hero-detail.component.html</code>，内容如下：</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-1.component.html\" region=\"simple-control\" title=\"src/app/hero-detail.component.html\" linenums=\"false\">\n&#x3C;h2>Hero Detail&#x3C;/h2>\n&#x3C;h3>&#x3C;i>Just a <a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a>&#x3C;/i>&#x3C;/h3>\n&#x3C;label class=\"center-block\">Name:\n  &#x3C;input class=\"form-control\" [formControl]=\"name\">\n&#x3C;/label>\n\n</code-example>\n<p translation-origin=\"off\">To let Angular know that this is the input that you want to\nassociate to the <code>name</code> <code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code> in the class,\nyou need <code>[formControl]=\"name\"</code> in the template on the <code>&#x3C;input></code>.</p>\n<p translation-result=\"\">要让Angular知道我们希望把这个输入框关联到类中的<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>型属性<code>name</code>，我们需要在模板中的<code>&#x3C;input></code>上加一句<code>[formControl]=\"name\"</code>。</p>\n<div class=\"l-sub-section\">\n<p translation-origin=\"off\">Disregard the <code>form-control</code> <em>CSS</em> class. It belongs to the\n<a href=\"http://getbootstrap.com/\" title=\"Bootstrap CSS\">Bootstrap CSS library</a>,\nnot Angular.\nIt <em>styles</em> the form but in no way impacts the logic of the form.</p>\n<p translation-result=\"\">请忽略CSS类<code>form-control</code>，它属于<a href=\"http://getbootstrap.com/\" target=\"_blank\" title=\"Bootstrap CSS\">Bootstrap CSS library</a>而不是Angular。\n它会为表单添加样式，但是对表单的逻辑毫无影响。</p>\n</div>\n<a id=\"import\"></a>\n<h2 translation-origin=\"off\" id=\"import-the-reactiveformsmodule\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#import-the-reactiveformsmodule\"><i class=\"material-icons\">link</i></a>Import the <em>ReactiveFormsModule</em></h2>\n<h2 translation-result=\"\" id=\"导入reactiveformsmodule\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#导入reactiveformsmodule\"><i class=\"material-icons\">link</i></a>导入<code><a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a></code></h2>\n<p translation-origin=\"off\">The HeroDetailComponent template uses <code>formControlName</code>\ndirective from the <code><a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a></code>.</p>\n<p translation-result=\"\"><code>HeroDetailComponent</code>的模板中使用了来自<code><a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a></code>的<code>formControlName</code>。</p>\n<p translation-origin=\"off\">In this sample, you declare the <code>HeroDetailComponent</code> in the <code>AppModule</code>.\nTherefore, do the following three things in <code>app.module.ts</code>:</p>\n<p translation-result=\"\">在这个例子中，我们在<code>AppModule</code>中声明了<code>HeroDetailComponent</code>。因此现在<code>app.module.ts</code>中做了三件事：</p>\n<ol>\n<li>\n<p translation-origin=\"off\">Use a JavaScript <code>import</code> statement to access\nthe <code><a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a></code> and the <code>HeroDetailComponent</code>.</p>\n<p translation-result=\"\">  使用JavaScript的<code>import</code>语句访问<code><a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a></code>和<code>HeroDetailComponent</code>。\n</p>\n</li>\n<li>\n<p translation-origin=\"off\">Add <code><a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a></code> to the <code>AppModule</code>'s <code>imports</code> list.</p>\n<p translation-result=\"\">把<code><a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a></code>添加到<code>AppModule</code>的<code>imports</code>列表中。</p>\n</li>\n<li>\n<p translation-origin=\"off\">Add <code>HeroDetailComponent</code> to the declarations array.</p>\n<p translation-result=\"\">把<code>HeroDetailComponent</code>添加到声明数组中。</p>\n</li>\n</ol>\n<code-example path=\"reactive-forms/src/app/app.module.ts\" region=\"v1\" title=\"src/app/app.module.ts (excerpt)\" linenums=\"false\">\nimport { <a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a> }            from '@angular/core';\nimport { <a href=\"api/platform-browser/BrowserModule\" class=\"code-anchor\">BrowserModule</a> }       from '@angular/platform-<a href=\"api/animations/browser\" class=\"code-anchor\">browser</a>';\nimport { <a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a> } from '@angular/forms';  // &#x3C;-- #1 import module\n\nimport { AppComponent }        from './app.component';\nimport { HeroDetailComponent } from './hero-detail.component'; // &#x3C;-- #1 import component\n\n@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>({\n  imports: [\n    <a href=\"api/platform-browser/BrowserModule\" class=\"code-anchor\">BrowserModule</a>,\n    <a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a> // &#x3C;-- #2 add to @<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a> imports\n  ],\n  declarations: [\n    AppComponent,\n    HeroDetailComponent, // &#x3C;-- #3 declare app component\n  ],\n  bootstrap: [ AppComponent ]\n})\nexport class AppModule { }\n\n</code-example>\n<a id=\"update\"></a>\n<h2 translation-origin=\"off\" id=\"display-the-herodetailcomponent\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#display-the-herodetailcomponent\"><i class=\"material-icons\">link</i></a>Display the <em>HeroDetailComponent</em></h2>\n<h2 translation-result=\"\" id=\"显示herodetailcomponent\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#显示herodetailcomponent\"><i class=\"material-icons\">link</i></a>显示<code>HeroDetailComponent</code></h2>\n<p translation-origin=\"off\">Revise the <code>AppComponent</code> template so it displays the <code>HeroDetailComponent</code>.</p>\n<p translation-result=\"\">修改<code>AppComponent</code>的模板，以便显示<code>HeroDetailComponent</code>。</p>\n<code-example path=\"reactive-forms/src/app/app.component.1.ts\" title=\"src/app/app.component.ts\" linenums=\"false\">\nimport { <a href=\"api/core/Component\" class=\"code-anchor\">Component</a> } from '@angular/core';\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-root',\n  template: `\n  &#x3C;div class=\"container\">\n    &#x3C;h1>Reactive Forms&#x3C;/h1>\n    &#x3C;app-hero-detail>&#x3C;/app-hero-detail>\n  &#x3C;/div>`\n})\nexport class AppComponent { }\n\n\n</code-example>\n<a id=\"essentials\"></a>\n<h3 translation-origin=\"off\" id=\"essential-form-classes\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#essential-form-classes\"><i class=\"material-icons\">link</i></a>Essential form classes</h3>\n<h3 translation-result=\"\" id=\"基础的表单类\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#基础的表单类\"><i class=\"material-icons\">link</i></a>基础的表单类</h3>\n<p translation-origin=\"off\">It may be helpful to read a brief description of the core form classes.</p>\n<p translation-result=\"\">阅读一下这些核心表单类的简短描述也许会有用。</p>\n<ul>\n<li>\n<p translation-origin=\"off\"><a href=\"api/forms/AbstractControl\" title=\"API Reference: AbstractControl\"><em>AbstractControl</em></a>\nis the abstract base class for the three concrete form control classes:\n<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>, <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>, and <code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code>.\nIt provides their common behaviors and properties, some of which are <em>observable</em>.</p>\n<p translation-result=\"\">  <a href=\"api/forms/AbstractControl\" title=\"API Reference: AbstractControl\"><code>AbstractControl</code></a>是三个具体表单类的抽象基类。\n并为它们提供了一些共同的行为和属性，其中有些是<em>可观察对象（Observable）</em>。</p>\n</li>\n<li>\n<p translation-origin=\"off\"><a href=\"api/forms/FormControl\" title=\"API Reference: FormControl\"><em>FormControl</em></a>\ntracks the value and validity status of an <em>individual</em> form control.\nIt corresponds to an HTML form control such as an input box or selector.</p>\n<p translation-result=\"\">  <a href=\"api/forms/FormControl\" title=\"API Reference: FormControl\"><em>FormControl</em></a>\n用于跟踪一个<em>单独的</em>表单控件的值和有效性状态。它对应于一个HTML表单控件，比如输入框和下拉框。</p>\n</li>\n<li>\n<p translation-origin=\"off\"><a href=\"api/forms/FormGroup\" title=\"API Reference: FormGroup\"><em>FormGroup</em></a>\ntracks the value and validity state of a <em>group</em> of <code><a href=\"api/forms/AbstractControl\" class=\"code-anchor\">AbstractControl</a></code> instances.\nThe group's properties include its child controls.\nThe top-level form in your component is a <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>.</p>\n<p translation-result=\"\">  <a href=\"api/forms/FormGroup\" title=\"API Reference: FormGroup\"><em>FormGroup</em></a>用于\n跟踪<em>一组</em><code><a href=\"api/forms/AbstractControl\" class=\"code-anchor\">AbstractControl</a></code>的实例的值和有效性状态。\n该组的属性中包含了它的子控件。\n组件中的顶级表单就是一个<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>。</p>\n</li>\n<li>\n<p translation-origin=\"off\"><a href=\"api/forms/FormArray\" title=\"API Reference: FormArray\"><em>FormArray</em></a>\ntracks the value and validity state of a numerically indexed <em>array</em> of <code><a href=\"api/forms/AbstractControl\" class=\"code-anchor\">AbstractControl</a></code> instances.</p>\n<p translation-result=\"\">  <a href=\"api/forms/FormArray\" title=\"API Reference: FormArray\"><em>FormArray</em></a>用于跟踪<code><a href=\"api/forms/AbstractControl\" class=\"code-anchor\">AbstractControl</a></code>实例组成的有序数组的值和有效性状态。</p>\n</li>\n</ul>\n<p translation-origin=\"off\">You'll learn more about these classes as you work through this guide.</p>\n<p translation-result=\"\">随着本章的深入，我们将学到关于这三个类的更多知识。</p>\n<h3 translation-origin=\"off\" id=\"style-the-app\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#style-the-app\"><i class=\"material-icons\">link</i></a>Style the app</h3>\n<h3 translation-result=\"\" id=\"为应用添加样式\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#为应用添加样式\"><i class=\"material-icons\">link</i></a>为应用添加样式</h3>\n<p translation-origin=\"off\">You used bootstrap CSS classes in the template HTML of both the <code>AppComponent</code> and the <code>HeroDetailComponent</code>.\nAdd the <code>bootstrap</code> <em>CSS stylesheet</em> to the head of <code>index.html</code>:</p>\n<p translation-result=\"\">我们在<code>AppComponent</code>和<code>HeroDetailComponent</code>的模板中使用Bootstrap中的CSS类。请把<code>bootstrap</code>的<em>CSS样式表文件</em>添加到<code>index.html</code>的<code>head</code>区。</p>\n<code-example path=\"reactive-forms/src/index.html\" region=\"bootstrap\" title=\"index.html\" linenums=\"false\">\n&#x3C;link rel=\"stylesheet\" href=\"https://unpkg.com/bootstrap@3.3.7/dist/css/bootstrap.min.css\">\n\n</code-example>\n<p translation-origin=\"off\">Now that everything is wired up, the browser should display something like this:</p>\n<p translation-result=\"\">这些做好之后，浏览器中应该显示成这样：</p>\n<figure>\n  <img src=\"generated/images/guide/reactive-forms/just-formcontrol.png\" alt=\"Single FormControl\" width=\"400\" height=\"133\">\n</figure>\n<a id=\"formgroup\"></a>\n<h2 translation-origin=\"off\" id=\"add-a-formgroup\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#add-a-formgroup\"><i class=\"material-icons\">link</i></a>Add a FormGroup</h2>\n<h2 translation-result=\"\" id=\"添加formgroup\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#添加formgroup\"><i class=\"material-icons\">link</i></a>添加FormGroup</h2>\n<p translation-origin=\"off\">Usually, if you have multiple <em>FormControls</em>, you'll want to register\nthem within a parent <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>.\nThis is simple to do. To add a <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>, add it to the imports section\nof <code>hero-detail.component.ts</code>:</p>\n<p translation-result=\"\">通常，如果有多个<em>FormControl</em>，我们会希望把它们注册进一个父<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>中。这很容易。只要把它加入<code>hero-detail.component.ts</code>的<code>import</code>区就可以了。</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-2.component.ts\" region=\"imports\" title=\"src/app/hero-detail.component.ts\" linenums=\"false\">\nimport { <a href=\"api/core/Component\" class=\"code-anchor\">Component</a> }              from '@angular/core';\nimport { <a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a>, <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a> } from '@angular/forms';\n\n</code-example>\n<p translation-origin=\"off\">In the class, wrap the <code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code> in a <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code> called <code>heroForm</code> as follows:</p>\n<p translation-result=\"\">在这个类中，把<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>包裹进了一个名叫<code>heroForm</code>的<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>中，代码如下：</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-2.component.ts\" region=\"v2\" title=\"src/app/hero-detail.component.ts\" linenums=\"false\">\nexport class HeroDetailComponent2 {\n  heroForm = new <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a> ({\n    name: new <a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a>()\n  });\n}\n\n</code-example>\n<p translation-origin=\"off\">Now that you've made changes in the class, they need to be reflected in the\ntemplate. Update <code>hero-detail.component.html</code> by replacing it with the following.</p>\n<p translation-result=\"\">现在我们改完了这个类，该把它映射到模板中了。把<code>hero-detail.component.html</code>改成这样：</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-2.component.html\" region=\"basic-form\" title=\"src/app/hero-detail.component.html\" linenums=\"false\">\n&#x3C;h2>Hero Detail&#x3C;/h2>\n&#x3C;h3>&#x3C;i><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a> in a <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a>&#x3C;/i>&#x3C;/h3>\n&#x3C;form [formGroup]=\"heroForm\" novalidate>\n  &#x3C;div class=\"form-group\">\n    &#x3C;label class=\"center-block\">Name:\n      &#x3C;input class=\"form-control\" formControlName=\"name\">\n    &#x3C;/label>\n  &#x3C;/div>\n&#x3C;/form>\n\n</code-example>\n<p translation-origin=\"off\">Notice that now the single input is in a <code>form</code> element. The <code>novalidate</code>\nattribute in the <code>&#x3C;form></code> element prevents the browser\nfrom attempting native HTML validations.</p>\n<p translation-result=\"\">注意，现在单行输入框位于一个<code>form</code>元素中。<code>&#x3C;form></code>元素上的<code>novalidate</code>属性会阻止浏览器使用原生HTML中的表单验证器。</p>\n<p translation-origin=\"off\"><code>formGroup</code> is a reactive form directive that takes an existing\n<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code> instance and associates it with an HTML element.\nIn this case, it associates the <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code> you saved as\n<code>heroForm</code> with the form element.</p>\n<p translation-result=\"\"><code>formGroup</code>是一个响应式表单的指令，它拿到一个现有<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>实例，并把它关联到一个HTML元素上。\n这种情况下，它关联到的是<code>form</code>元素上的<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>实例<code>heroForm</code>。</p>\n<p translation-origin=\"off\">Because the class now has a <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>, you must update the template\nsyntax for associating the input with the corresponding\n<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code> in the component class.\nWithout a parent <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>,\n<code>[formControl]=\"name\"</code> worked earlier because that directive\ncan stand alone, that is, it works without being in a <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>.\nWith a parent <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>, the <code>name</code> input needs the syntax\n<code>formControlName=name</code> in order to be associated\nwith the correct <code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>\nin the class. This syntax tells Angular to look for the parent\n<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>, in this case <code>heroForm</code>, and then <em>inside</em> that group\nto look for a <code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code> called <code>name</code>.</p>\n<p translation-result=\"\">由于现在有了一个<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>，因此我们必须修改模板语法来把输入框关联到组件类中对应的<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>上。\n以前没有父<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>的时候，<code>[formControl]=\"name\"</code>也能正常工作，因为该指令可以独立工作，也就是说，不在<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>中时它也能用。\n有了<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>，<code>name</code>输入框就需要再添加一个语法<code>formControlName=name</code>，以便让它关联到类中正确的<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>上。\n这个语法告诉Angular，查阅父<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>（这里是<code>heroForm</code>），然后在这个<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>中查阅一个名叫<code>name</code>的<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>。</p>\n<div class=\"l-sub-section\">\n<p translation-origin=\"off\">Disregard the <code>form-group</code> <em>CSS</em> class. It belongs to the\n<a href=\"http://getbootstrap.com/\" title=\"Bootstrap CSS\">Bootstrap CSS library</a>,\nnot Angular.\nLike the <code>form-control</code> class, it <em>styles</em> the form\nbut in no way impacts its logic.</p>\n<p translation-result=\"\">请无视<em>CSS</em>类<code>form-group</code>，它属于<a href=\"http://getbootstrap.com/\" target=\"_blank\" title=\"Bootstrap CSS\">Bootstrap CSS library</a>而不是Angular。\n就像<code>form-control</code>类一样，它只是为表单添加样式，而对表单逻辑毫无影响。</p>\n</div>\n<p translation-origin=\"off\">The form looks great. But does it work?\nWhen the user enters a name, where does the value go?</p>\n<p translation-result=\"\">表单看起来很棒，但是它能用吗？\n当用户输入名字时，它的值去了哪里？</p>\n<a id=\"json\"></a>\n<h2 translation-origin=\"off\" id=\"taking-a-look-at-the-form-model\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#taking-a-look-at-the-form-model\"><i class=\"material-icons\">link</i></a>Taking a look at the form model</h2>\n<h2 translation-result=\"\" id=\"表单模型概览\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#表单模型概览\"><i class=\"material-icons\">link</i></a>表单模型概览</h2>\n<p translation-origin=\"off\">The value goes into the <strong><em>form model</em></strong> that backs the group's <code>FormControls</code>.\nTo see the form model, add the following line after the\nclosing <code>form</code> tag in the <code>hero-detail.component.html</code>:</p>\n<p translation-result=\"\">这个值进入了幕后<strong>表单模型</strong>中的<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>构成的表单组。\n要想知道表单模型是什么样的，请在<code>hero-detail.component.html</code>的<code>form</code>标签紧后面添加如下代码：</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-3.component.html\" region=\"form-value-json\" title=\"src/app/hero-detail.component.html\" linenums=\"false\">\n&#x3C;p><a href=\"api/forms/Form\" class=\"code-anchor\">Form</a> value: {{ heroForm.value | <a href=\"api/common/JsonPipe\" class=\"code-anchor\">json</a> }}&#x3C;/p>\n&#x3C;p><a href=\"api/forms/Form\" class=\"code-anchor\">Form</a> status: {{ heroForm.status | <a href=\"api/common/JsonPipe\" class=\"code-anchor\">json</a> }}&#x3C;/p>\n\n</code-example>\n<p translation-origin=\"off\">The <code>heroForm.value</code> returns the <em>form model</em>.\nPiping it through the <code><a href=\"api/common/JsonPipe\" class=\"code-anchor\">JsonPipe</a></code> renders the model as JSON in the browser:</p>\n<p translation-result=\"\"><code>heroForm.value</code>会返回表单模型。\n用<code><a href=\"api/common/JsonPipe\" class=\"code-anchor\">JsonPipe</a></code>管道把这个模型以JSON格式渲染到浏览器中。</p>\n<figure>\n  <img src=\"generated/images/guide/reactive-forms/json-output.png\" alt=\"JSON output\" width=\"400\" height=\"176\">\n</figure>\n<p translation-origin=\"off\">The initial <code>name</code> property value is the empty string.\nType into the <em>name</em> input box and watch the keystokes appear in the JSON.</p>\n<p translation-result=\"\">最初的<code>name</code>属性是个空字符串，在<em>name</em>输入框中输入之后，可以看到这些按键出现在了JSON中。</p>\n<p translation-origin=\"off\">Great! You have the basics of a form.</p>\n<p translation-result=\"\">真棒！我们有了一个基本版表单。</p>\n<p translation-origin=\"off\">In real life apps, forms get big fast.\n<code><a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a></code> makes form development and maintenance easier.</p>\n<p translation-result=\"\">在真实的应用中，表单很快就会变大。\n<code><a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a></code>能让表单开发和维护变得更简单。</p>\n<a id=\"formbuilder\"></a>\n<h2 translation-origin=\"off\" id=\"introduction-to-formbuilder\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#introduction-to-formbuilder\"><i class=\"material-icons\">link</i></a>Introduction to <em>FormBuilder</em></h2>\n<h2 translation-result=\"\" id=\"formbuilder简介\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#formbuilder简介\"><i class=\"material-icons\">link</i></a><code><a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a></code>简介</h2>\n<p translation-origin=\"off\">The <code><a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a></code> class helps reduce repetition and\nclutter by handling details of control creation for you.</p>\n<p translation-result=\"\"><code><a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a></code>类能通过处理控件创建的细节问题来帮我们减少重复劳动。</p>\n<p translation-origin=\"off\">To use <code><a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a></code>, you need to import it into <code>hero-detail.component.ts</code>:</p>\n<p translation-result=\"\">要使用<code><a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a></code>，我们就要先把它导入到<code>hero-detail.component.ts</code>中：</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-3a.component.ts\" region=\"imports\" title=\"src/app/hero-detail.component.ts (excerpt)\" linenums=\"false\">\nimport { <a href=\"api/core/Component\" class=\"code-anchor\">Component</a> }              from '@angular/core';\nimport { <a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a>, <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a> } from '@angular/forms';\n\n</code-example>\n<p translation-origin=\"off\">Use it now to refactor the <code>HeroDetailComponent</code> into something that's a little easier to read and write,\nby following this plan:</p>\n<p translation-result=\"\">现在，我们遵循下列步骤用<code><a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a></code>来把<code>HeroDetailComponent</code>重构得更加容易读写。</p>\n<ul>\n<li>\n<p translation-origin=\"off\">Explicitly declare the type of the <code>heroForm</code> property to be <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>; you'll initialize it later.</p>\n<p translation-result=\"\">明确把<code>heroForm</code>属性的类型声明为<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>，稍后我们会初始化它。</p>\n</li>\n<li>\n<p translation-origin=\"off\">Inject a <code><a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a></code> into the constructor.</p>\n<p translation-result=\"\">把<code><a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a></code>注入到构造函数中。</p>\n</li>\n<li>\n<p translation-origin=\"off\">Add a new method that uses the <code><a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a></code> to define the <code>heroForm</code>; call it <code>createForm</code>.</p>\n<p translation-result=\"\">添加一个名叫<code>createForm</code>的新方法，它会用<code><a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a></code>来定义<code>heroForm</code>。</p>\n</li>\n<li>\n<p translation-origin=\"off\">Call <code>createForm</code> in the constructor.</p>\n<p translation-result=\"\">在构造函数中调用<code>createForm</code>。</p>\n</li>\n</ul>\n<p translation-origin=\"off\">The revised <code>HeroDetailComponent</code> looks like this:</p>\n<p translation-result=\"\">修改过的<code>HeroDetailComponent</code>代码如下：</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-3a.component.ts\" region=\"v3a\" title=\"src/app/hero-detail.component.ts (excerpt)\" linenums=\"false\">\nexport class HeroDetailComponent3 {\n  heroForm: <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a>; // &#x3C;--- heroForm is of type <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a>\n\n  constructor(private fb: <a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a>) { // &#x3C;--- <a href=\"api/core/testing/inject\" class=\"code-anchor\">inject</a> <a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a>\n    this.createForm();\n  }\n\n  createForm() {\n    this.heroForm = this.fb.group({\n      name: '', // &#x3C;--- the <a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a> called \"name\"\n    });\n  }\n}\n\n</code-example>\n<p translation-origin=\"off\"><code><a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a>.group</code> is a factory method that creates a <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>.  \n<code><a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a>.group</code> takes an object whose keys and values are <code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code> names and their definitions.\nIn this example, the <code>name</code> control is defined by its initial data value, an empty string.</p>\n<p translation-result=\"\"><code><a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a>.group</code>是一个用来创建<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>的工厂方法，它接受一个对象，对象的键和值分别是<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>的名字和它的定义。\n在这个例子中，<code>name</code>控件的初始值是空字符串。</p>\n<p translation-origin=\"off\">Defining a group of controls in a single object makes for a compact, readable style.\nIt beats writing an equivalent series of <code>new <a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a>(...)</code> statements.</p>\n<p translation-result=\"\">把一组控件定义在一个单一对象中，可以更加紧凑、易读。\n完成相同功能时，这种形式优于一系列<code>new <a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a>(...)</code>语句。</p>\n<a id=\"validators\"></a>\n<h3 translation-origin=\"off\" id=\"validatorsrequired\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#validatorsrequired\"><i class=\"material-icons\">link</i></a>Validators.required</h3>\n<h3 translation-result=\"\" id=\"validatorsrequired-验证器\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#validatorsrequired-验证器\"><i class=\"material-icons\">link</i></a>Validators.required 验证器</h3>\n<p translation-origin=\"off\">Though this guide doesn't go deeply into validations, here is one example that\ndemonstrates the simplicity of using <code><a href=\"api/forms/Validators\" class=\"code-anchor\">Validators</a>.required</code> in reactive forms.</p>\n<p translation-result=\"\">虽然本章不会深入讲解验证机制，但还是有一个例子来示范如何简单的在响应式表单中使用<code><a href=\"api/forms/Validators\" class=\"code-anchor\">Validators</a>.required</code>。</p>\n<p translation-origin=\"off\">First, import the <code><a href=\"api/forms/Validators\" class=\"code-anchor\">Validators</a></code> symbol.</p>\n<p translation-result=\"\">首先，导入<code><a href=\"api/forms/Validators\" class=\"code-anchor\">Validators</a></code>符号。</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-3.component.ts\" region=\"imports\" title=\"src/app/hero-detail.component.ts (excerpt)\" linenums=\"false\">\nimport { <a href=\"api/core/Component\" class=\"code-anchor\">Component</a> }                          from '@angular/core';\nimport { <a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a>, <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a>, <a href=\"api/forms/Validators\" class=\"code-anchor\">Validators</a> } from '@angular/forms';\n\n</code-example>\n<p translation-origin=\"off\">To make the <code>name</code> <code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code> required, replace the <code>name</code>\nproperty in the <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code> with an array.\nThe first item is the initial value for <code>name</code>;\nthe second is the required validator, <code><a href=\"api/forms/Validators\" class=\"code-anchor\">Validators</a>.required</code>.</p>\n<p translation-result=\"\">要想让<code>name</code>这个<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>是必须的，请把<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>中的<code>name</code>属性改为一个数组。第一个条目是<code>name</code>的初始值，第二个是<code>required</code>验证器：<code><a href=\"api/forms/Validators\" class=\"code-anchor\">Validators</a>.required</code>。</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-3.component.ts\" region=\"required\" title=\"src/app/hero-detail.component.ts (excerpt)\" linenums=\"false\">\nthis.heroForm = this.fb.group({\n  name: ['', <a href=\"api/forms/Validators\" class=\"code-anchor\">Validators</a>.required ],\n});\n\n</code-example>\n<div class=\"l-sub-section\">\n<p translation-origin=\"off\">Reactive validators are simple, composable functions.\nConfiguring validation is harder in template-driven forms where you must wrap validators in a directive.</p>\n<p translation-result=\"\">响应式验证器是一些简单、可组合的函数。\n在模板驱动表单中配置验证器有些困难，因为我们必须把验证器包装进指令中。</p>\n</div>\n<p translation-origin=\"off\">Update the diagnostic message at the bottom of the template to display the form's validity status.</p>\n<p translation-result=\"\">修改模板底部的诊断信息，以显示表单的有效性状态。</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-3.component.html\" region=\"form-value-json\" title=\"src/app/hero-detail.component.html (excerpt)\" linenums=\"false\">\n&#x3C;p><a href=\"api/forms/Form\" class=\"code-anchor\">Form</a> value: {{ heroForm.value | <a href=\"api/common/JsonPipe\" class=\"code-anchor\">json</a> }}&#x3C;/p>\n&#x3C;p><a href=\"api/forms/Form\" class=\"code-anchor\">Form</a> status: {{ heroForm.status | <a href=\"api/common/JsonPipe\" class=\"code-anchor\">json</a> }}&#x3C;/p>\n\n</code-example>\n<p translation-origin=\"off\">The browser displays the following:</p>\n<p translation-result=\"\">浏览器会显示下列内容：</p>\n<figure>\n  <img src=\"generated/images/guide/reactive-forms/validators-json-output.png\" alt=\"Single FormControl\" width=\"400\" height=\"223\">\n</figure>\n<p translation-origin=\"off\"><code><a href=\"api/forms/Validators\" class=\"code-anchor\">Validators</a>.required</code> is working. The status is <code>INVALID</code> because the input box has no value.\nType into the input box to see the status change from <code>INVALID</code> to <code>VALID</code>.</p>\n<p translation-result=\"\"><code><a href=\"api/forms/Validators\" class=\"code-anchor\">Validators</a>.required</code>生效了，但状态还是<code>INVALID</code>，因为输入框中还没有值。\n在输入框中输入，就会看到这个状态从<code>INVALID</code>变成了<code>VALID</code>。</p>\n<p translation-origin=\"off\">In a real app, you'd replace the diagnosic message with a user-friendly experience.</p>\n<p translation-result=\"\">在真实的应用中，我们要把这些诊断信息替换成用户友好的信息。</p>\n<p translation-origin=\"off\">Using <code><a href=\"api/forms/Validators\" class=\"code-anchor\">Validators</a>.required</code> is optional for the rest of the guide.\nIt remains in each of the following examples with the same configuration.</p>\n<p translation-result=\"\">在本章的其余部分，<code><a href=\"api/forms/Validators\" class=\"code-anchor\">Validators</a>.required</code>是可有可无的，但在每个与此范例配置相同的范例中都会保留它。</p>\n<p translation-origin=\"off\">For more on validating Angular forms, see the\n<a href=\"guide/form-validation\">Form Validation</a> guide.</p>\n<p translation-result=\"\">要了解Angular表单验证器的更多知识，参见<a href=\"guide/form-validation\">表单验证器</a>一章。</p>\n<h3 translation-origin=\"off\" id=\"more-formcontrols\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#more-formcontrols\"><i class=\"material-icons\">link</i></a>More FormControls</h3>\n<h3 translation-result=\"\" id=\"更多的表单控件（formcontrol）\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#更多的表单控件（formcontrol）\"><i class=\"material-icons\">link</i></a>更多的表单控件（FormControl）</h3>\n<p translation-origin=\"off\">A hero has more than a name.\nA hero has an address, a super power and sometimes a sidekick too.</p>\n<p translation-result=\"\">每个英雄可以有多个名字，还有一个住址、一项超能力，有时还会有一个副手。</p>\n<p translation-origin=\"off\">The address has a state property. The user will select a state with a <code>&#x3C;select></code> box and you'll populate\nthe <code>&#x3C;<a href=\"api/forms/NgSelectOption\" class=\"code-anchor\">option</a>></code> elements with states. So import <code>states</code> from <code>data-model.ts</code>.</p>\n<p translation-result=\"\">住址中有一个所在州属性，用户将会从<code>&#x3C;select></code>框中选择一个州，我们会用<code>&#x3C;<a href=\"api/forms/NgSelectOption\" class=\"code-anchor\">option</a>></code>元素渲染各个州。我们从<code>data-model.ts</code>中导入<code>states</code>（州列表）。</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-4.component.ts\" region=\"imports\" title=\"src/app/hero-detail.component.ts (excerpt)\" linenums=\"false\">\nimport { <a href=\"api/core/Component\" class=\"code-anchor\">Component</a> }                          from '@angular/core';\nimport { <a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a>, <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a>, <a href=\"api/forms/Validators\" class=\"code-anchor\">Validators</a> } from '@angular/forms';\n\nimport { states } from './data-model';\n\n</code-example>\n<p translation-origin=\"off\">Declare the <code>states</code> property and add some address <code>FormControls</code> to the <code>heroForm</code> as follows.</p>\n<p translation-result=\"\">声明<code>states</code>属性并往<code>heroForm</code>中添加一些表示住址的<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>，代码如下：</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-4.component.ts\" region=\"v4\" title=\"src/app/hero-detail.component.ts (excerpt)\" linenums=\"false\">\nexport class HeroDetailComponent4 {\n  heroForm: <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a>;\n  states = states;\n\n  constructor(private fb: <a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a>) {\n    this.createForm();\n  }\n\n  createForm() {\n    this.heroForm = this.fb.group({\n      name: ['', <a href=\"api/forms/Validators\" class=\"code-anchor\">Validators</a>.required ],\n      street: '',\n      city: '',\n      state: '',\n      zip: '',\n      power: '',\n      sidekick: ''\n    });\n  }\n}\n\n</code-example>\n<p translation-origin=\"off\">Then add corresponding markup in <code>hero-detail.component.html</code>\nwithin the <code>form</code> element.</p>\n<p translation-result=\"\">然后在<code>hero-detail.component.html</code>文件中把对应的脚本添加到<code>form</code>元素中。</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-4.component.html\" title=\"src/app/hero-detail.component.html\" linenums=\"false\">\n&#x3C;h2>Hero Detail&#x3C;/h2>\n&#x3C;h3>&#x3C;i>A <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a> with multiple FormControls&#x3C;/i>&#x3C;/h3>\n&#x3C;form [formGroup]=\"heroForm\" novalidate>\n  &#x3C;div class=\"form-group\">\n    &#x3C;label class=\"center-block\">Name:\n      &#x3C;input class=\"form-control\" formControlName=\"name\">\n    &#x3C;/label>\n  &#x3C;/div>\n  &#x3C;div class=\"form-group\">\n    &#x3C;label class=\"center-block\">Street:\n      &#x3C;input class=\"form-control\" formControlName=\"street\">\n    &#x3C;/label>\n  &#x3C;/div>\n  &#x3C;div class=\"form-group\">\n    &#x3C;label class=\"center-block\">City:\n      &#x3C;input class=\"form-control\" formControlName=\"city\">\n    &#x3C;/label>\n  &#x3C;/div>\n  &#x3C;div class=\"form-group\">\n    &#x3C;label class=\"center-block\">State:\n      &#x3C;select class=\"form-control\" formControlName=\"state\">\n          &#x3C;<a href=\"api/forms/NgSelectOption\" class=\"code-anchor\">option</a> *ngFor=\"let state of states\" [value]=\"state\">{{state}}&#x3C;/<a href=\"api/forms/NgSelectOption\" class=\"code-anchor\">option</a>>\n      &#x3C;/select>\n    &#x3C;/label>\n  &#x3C;/div>\n  &#x3C;div class=\"form-group\">\n    &#x3C;label class=\"center-block\">Zip Code:\n      &#x3C;input class=\"form-control\" formControlName=\"zip\">\n    &#x3C;/label>\n  &#x3C;/div>\n  &#x3C;div class=\"form-group radio\">\n    &#x3C;h4>Super power:&#x3C;/h4>\n    &#x3C;label class=\"center-block\">&#x3C;input type=\"radio\" formControlName=\"power\" value=\"flight\">Flight&#x3C;/label>\n    &#x3C;label class=\"center-block\">&#x3C;input type=\"radio\" formControlName=\"power\" value=\"x-ray vision\">X-ray vision&#x3C;/label>\n    &#x3C;label class=\"center-block\">&#x3C;input type=\"radio\" formControlName=\"power\" value=\"strength\">Strength&#x3C;/label>\n  &#x3C;/div>\n  &#x3C;div class=\"checkbox\">\n    &#x3C;label class=\"center-block\">\n      &#x3C;input type=\"checkbox\" formControlName=\"sidekick\">I have a sidekick.\n    &#x3C;/label>\n  &#x3C;/div>\n&#x3C;/form>\n\n\n&#x3C;p><a href=\"api/forms/Form\" class=\"code-anchor\">Form</a> value: {{ heroForm.value | <a href=\"api/common/JsonPipe\" class=\"code-anchor\">json</a> }}&#x3C;/p>\n\n\n</code-example>\n<div class=\"alert is-helpful\">\n<p translation-origin=\"off\"><em>Reminder</em>: Ignore the many mentions of <code>form-group</code>,\n<code>form-control</code>, <code>center-block</code>, and <code>checkbox</code> in this markup.\nThose are <em>bootstrap</em> CSS classes that Angular itself ignores.\nPay attention to the <code>formGroupName</code> and <code>formControlName</code> attributes.\nThey are the Angular directives that bind the HTML controls to the\nAngular <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code> and <code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code> properties in the component class.</p>\n<p translation-result=\"\"><em>注意</em>：不用管这些脚本中提到的<code>form-group</code>、<code>form-control</code>、<code>center-block</code>和<code>checkbox</code>等。\n它们是来自<em>Bootstrap</em>的CSS类，Angular本身不会管它们。\n注意<code>formGroupName</code>和<code>formControlName</code>属性。\n他们是Angular指令，用于把相应的HTML控件绑定到组件中的<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>和<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>类型的属性上。</p>\n</div>\n<p translation-origin=\"off\">The revised template includes more text inputs, a select box for the <code>state</code>, radio buttons for the <code>power</code>,\nand a checkbox for the <code>sidekick</code>.</p>\n<p translation-result=\"\">修改过的模板包含更多文本输入框，一个<code>state</code>选择框，<code>power</code>（超能力）的单选按钮和一个<code>sidekick</code>检查框。</p>\n<p translation-origin=\"off\">You must bind the option's value property with <code>[value]=\"state\"</code>.\nIf you do not bind the value, the select shows the first option from the data model.</p>\n<p translation-result=\"\">我们要用<code>[value]=\"state\"</code>来绑定选项的<code>value</code>属性。\n如果不绑定这个值，这个选择框就会显示来自数据模型中的第一个选项。</p>\n<p translation-origin=\"off\">The component <em>class</em> defines control properties without regard for their representation in the template.\nYou define the <code>state</code>, <code>power</code>, and <code>sidekick</code> controls the same way you defined the <code>name</code> control.\nYou tie these controls to the template HTML elements in the same way,\nspecifying the <code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code> name with the <code>formControlName</code> directive.</p>\n<p translation-result=\"\">组件<em>类</em>定义了控件属性而不用管它们在模板中的表现形式。\n我们可以像定义<code>name</code>控件一样定义<code>state</code>、<code>power</code>和<code>sidekick</code>控件，并用<code>formControlName</code>指令来指定<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>的名字。</p>\n<p translation-origin=\"off\">See the API reference for more information about\n<a href=\"api/forms/RadioControlValueAccessor\" title=\"API: RadioControlValueAccessor\">radio buttons</a>,\n<a href=\"api/forms/SelectControlValueAccessor\" title=\"API: SelectControlValueAccessor\">selects</a>, and\n<a href=\"api/forms/CheckboxControlValueAccessor\" title=\"API: CheckboxControlValueAccessor\">checkboxes</a>.</p>\n<p translation-result=\"\">参见API参考手册中的<a href=\"api/forms/RadioControlValueAccessor\" title=\"API: RadioControlValueAccessor\">radio buttons</a>、\n<a href=\"api/forms/SelectControlValueAccessor\" title=\"API: SelectControlValueAccessor\">selects</a>和\n<a href=\"api/forms/CheckboxControlValueAccessor\" title=\"API: CheckboxControlValueAccessor\">checkboxes</a></p>\n<a id=\"grouping\"></a>\n<h3 translation-origin=\"off\" id=\"nested-formgroups\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#nested-formgroups\"><i class=\"material-icons\">link</i></a>Nested FormGroups</h3>\n<h3 translation-result=\"\" id=\"多级formgroup\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#多级formgroup\"><i class=\"material-icons\">link</i></a>多级<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code></h3>\n<p translation-origin=\"off\">This form is getting big and unwieldy. You can group some of the related <code>FormControls</code>\ninto a nested <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>. The <code>street</code>, <code>city</code>, <code>state</code>, and <code>zip</code> are properties\nthat would make a good <em>address</em> <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>.\nNesting groups and controls in this way allows you to\nmirror the hierarchical structure of the data model\nand helps track validation and state for related sets of controls.</p>\n<p translation-result=\"\">这个表单变得越来越大、越来越笨重。我们可以把一些相关的<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>组织到多级<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>中。\n<code>street</code>、<code>city</code>、<code>state</code>和<code>zip</code>属性就可以作为一个名叫<code>address</code>的<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>。\n用这种方式，多级表单组和控件可以让我们轻松地映射多层结构的数据模型，以便帮助我们跟踪这组相关控件的有效性和状态。</p>\n<p translation-origin=\"off\">You used the <code><a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a></code> to create one <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code> in this component called <code>heroForm</code>.\nLet that be the parent <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>.\nUse <code><a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a></code> again to create a child <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code> that encapsulates the address controls;\nassign the result to a new <code>address</code> property of the parent <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>.</p>\n<p translation-result=\"\">我们用<code><a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a></code>在这个名叫<code>heroForm</code>的组件中创建一个<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>，并把它用作父<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>。\n再次使用<code><a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a></code>创建一个子级<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>，其中包括这些住址控件。把结果赋值给父<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>中新的<code>address</code>属性。</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-5.component.ts\" region=\"v5\" title=\"src/app/hero-detail.component.ts (excerpt)\" linenums=\"false\">\nexport class HeroDetailComponent5 {\n  heroForm: <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a>;\n  states = states;\n\n  constructor(private fb: <a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a>) {\n    this.createForm();\n  }\n\n  createForm() {\n    this.heroForm = this.fb.group({ // &#x3C;-- the parent <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a>\n      name: ['', <a href=\"api/forms/Validators\" class=\"code-anchor\">Validators</a>.required ],\n      address: this.fb.group({ // &#x3C;-- the child <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a>\n        street: '',\n        city: '',\n        state: '',\n        zip: ''\n      }),\n      power: '',\n      sidekick: ''\n    });\n  }\n}\n\n</code-example>\n<p translation-origin=\"off\">You’ve changed the structure of the form controls in the component class;\nyou must make corresponding adjustments to the component template.</p>\n<p translation-result=\"\">我们已经修改了组件类中表单控件的结构，还必须对组件模板进行相应的调整。</p>\n<p translation-origin=\"off\">In <code>hero-detail.component.html</code>, wrap the address-related <code>FormControls</code> in a <code>div</code>.\nAdd a <code>formGroupName</code> directive to the <code>div</code> and bind it to <code>\"address\"</code>.\nThat's the property of the <em>address</em> child <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code> within the parent <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code> called <code>heroForm</code>.</p>\n<p translation-result=\"\">在<code>hero-detail.component.html</code>中，把与住址有关的<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>包裹进一个<code>div</code>中。\n往这个<code>div</code>上添加一个<code>formGroupName</code>指令，并且把它绑定到<code>\"address\"</code>上。\n这个<code>address</code>属性是一个<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>，它的父<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>就是<code>heroForm</code>。</p>\n<p translation-origin=\"off\">To make this change visually obvious, slip in an <code>&#x3C;h4></code> header near the top with the text, <em>Secret Lair</em>.\nThe new <em>address</em> HTML looks like this:</p>\n<p translation-result=\"\">要让这个变化更加明显，在文本的顶部加入一个<code>&#x3C;h4></code>头：<em>Secret Lair</em>。\n新的<em>住址</em>组的HTML如下：</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-5.component.html\" region=\"add-group\" title=\"src/app/hero-detail.component.html (excerpt)\" linenums=\"false\">\n&#x3C;div formGroupName=\"address\" class=\"well well-lg\">\n  &#x3C;h4>Secret Lair&#x3C;/h4>\n  &#x3C;div class=\"form-group\">\n    &#x3C;label class=\"center-block\">Street:\n      &#x3C;input class=\"form-control\" formControlName=\"street\">\n    &#x3C;/label>\n  &#x3C;/div>\n  &#x3C;div class=\"form-group\">\n    &#x3C;label class=\"center-block\">City:\n      &#x3C;input class=\"form-control\" formControlName=\"city\">\n    &#x3C;/label>\n  &#x3C;/div>\n  &#x3C;div class=\"form-group\">\n    &#x3C;label class=\"center-block\">State:\n      &#x3C;select class=\"form-control\" formControlName=\"state\">\n        &#x3C;<a href=\"api/forms/NgSelectOption\" class=\"code-anchor\">option</a> *ngFor=\"let state of states\" [value]=\"state\">{{state}}&#x3C;/<a href=\"api/forms/NgSelectOption\" class=\"code-anchor\">option</a>>\n      &#x3C;/select>\n    &#x3C;/label>\n  &#x3C;/div>\n  &#x3C;div class=\"form-group\">\n    &#x3C;label class=\"center-block\">Zip Code:\n      &#x3C;input class=\"form-control\" formControlName=\"zip\">\n    &#x3C;/label>\n  &#x3C;/div>\n&#x3C;/div>\n\n</code-example>\n<p translation-origin=\"off\">After these changes, the JSON output in the browser shows the revised <em>form model</em>\nwith the nested address <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>:</p>\n<p translation-result=\"\">做完这些之后，浏览器中的JSON输出就变成了带有多级<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>的住址。</p>\n<figure>\n  <img src=\"generated/images/guide/reactive-forms/address-group.png\" alt=\"JSON output\" width=\"400\" height=\"55\">\n</figure>\n<p translation-origin=\"off\">Great! You’ve made a group and you can see that the template\nand the form model are talking to one another.</p>\n<p translation-result=\"\">真棒！我们制作了一个控件组，并且可以看到模板和表单模型已经能彼此通讯了。</p>\n<a id=\"properties\"></a>\n<h2 translation-origin=\"off\" id=\"inspect-formcontrol-properties\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#inspect-formcontrol-properties\"><i class=\"material-icons\">link</i></a>Inspect <em>FormControl</em> Properties</h2>\n<h2 translation-result=\"\" id=\"查看formcontrol的属性\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#查看formcontrol的属性\"><i class=\"material-icons\">link</i></a>查看<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>的属性</h2>\n<p translation-origin=\"off\">At the moment, you're dumping the entire form model onto the page.\nSometimes you're interested only in the state of one particular <code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>.</p>\n<p translation-result=\"\">此刻，我们把整个表单模型展示在了页面里。\n但有时我们可能只关心一个特定<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>的状态。</p>\n<p translation-origin=\"off\">You can inspect an individual <code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code> within a form by extracting it with the <code>.get()</code> method.\nYou can do this <em>within</em> the component class or display it on the\npage by adding the following to the template,\nimmediately after the <code>{{form.value | <a href=\"api/common/JsonPipe\" class=\"code-anchor\">json</a>}}</code> interpolation as follows:</p>\n<p translation-result=\"\">我们可以使用<code>.get()</code>方法来提取表单中一个单独<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>的状态。\n我们可以在组件类中这么做，或者通过往模板中添加下列代码来把它显示在页面中，就添加在<code>{{form.value | <a href=\"api/common/JsonPipe\" class=\"code-anchor\">json</a>}}</code>插值表达式的紧后面：</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-5.component.html\" region=\"inspect-value\" title=\"src/app/hero-detail.component.html\" linenums=\"false\">\n&#x3C;p>Name value: {{ heroForm.get('name').value }}&#x3C;/p>\n\n</code-example>\n<p translation-origin=\"off\">To get the state of a <code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code> that’s inside a <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>, use dot notation to path to the control.</p>\n<p translation-result=\"\">要点取得<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>中的<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>的状态，使用点语法来指定到控件的路径。</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-5.component.html\" region=\"inspect-child-control\" title=\"src/app/hero-detail.component.html\" linenums=\"false\">\n&#x3C;p>Street value: {{ heroForm.get('address.street').value}}&#x3C;/p>\n\n</code-example>\n<p translation-origin=\"off\">You can use this technique to display <em>any</em> property of a <code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>\nsuch as one of the following:</p>\n<p translation-result=\"\">我们可以使用此技术来显示<code>FromControl</code>的<em>任意</em>属性，代码如下：</p>\n<style>\n  td, th {vertical-align: top}\n</style>\n<table width=\"100%\">\n  <colgroup><col width=\"10%\">\n  \n  <col width=\"90%\">\n  \n  </colgroup><tbody><tr>\n    <th>\n \n      <p translation-origin=\"off\">\n        Property\n      </p>\n      <p translation-result=\"\">\n        属性\n      </p>\n    </th>\n    <th>\n \n      <p translation-origin=\"off\">\n        Description\n      </p>\n      <p translation-result=\"\">\n        说明\n      </p>\n    </th>\n  </tr>\n  <tr>\n    <td>\n      <code>myControl.value</code>\n    </td>\n    <td>\n<p translation-origin=\"off\">      the value of a <code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>.</p>\n<p translation-result=\"\">      <code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>的值。</p>\n    </td>\n  </tr>\n  <tr>\n    <td>\n      <code>myControl.status</code>\n    </td>\n    <td>\n<p translation-origin=\"off\">      the validity of a <code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>. Possible values: <code>VALID</code>,\n<code>INVALID</code>, <code>PENDING</code>, or <code>DISABLED</code>.</p>\n<p translation-result=\"\">      <code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>的有效性。可能的值有<code>VALID</code>、<code>INVALID</code>、<code>PENDING</code>或<code>DISABLED</code>。</p>\n    </td>\n  </tr>\n  <tr>\n    <td>\n      <code>myControl.pristine</code>\n    </td>\n    <td>\n<p translation-origin=\"off\">      <code>true</code> if the user has <em>not</em> changed the value in the UI.\nIts opposite is <code>myControl.dirty</code>.</p>\n<p translation-result=\"\">      如果用户<em>尚未</em>改变过这个控件的值，则为<code>true</code>。它总是与<code>myControl.dirty</code>相反。</p>\n    </td>\n  </tr>\n  <tr>\n    <td>\n      <code>myControl.untouched</code>\n    </td>\n    <td>\n<p translation-result=\"\">      <code>true</code> if the control user has not yet entered the HTML control\nand triggered its blur event. Its opposite is <code>myControl.touched</code>.\n如果用户尚未进入这个HTML控件，也没有触发过它的<code>blur</code>（失去焦点）事件，则为<code>true</code>。\n它是<code>myControl.touched</code>的反义词。</p>\n    </td>\n  </tr>\n</tbody></table>\n<p translation-origin=\"off\">Learn about other <code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code> properties in the\n<a href=\"api/forms/AbstractControl\"><em>AbstractControl</em></a> API reference.</p>\n<p translation-result=\"\">要了解<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>的更多属性，参见API参考手册的<a href=\"api/forms/AbstractControl\"><em>AbstractControl</em></a>部分。</p>\n<p translation-origin=\"off\">One common reason for inspecting <code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code> properties is to\nmake sure the user entered valid values.\nRead more about validating Angular forms in the\n<a href=\"guide/form-validation\">Form Validation</a> guide.</p>\n<p translation-result=\"\">检查<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>属性的另一个原因是确保用户输入了有效的值。\n要了解更多关于Angular表单验证的知识，参见<a href=\"guide/form-validation\">表单验证</a>一章。</p>\n<a id=\"data-model-form-model\"></a>\n<h2 translation-origin=\"off\" id=\"the-data-model-and-the-form-model\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#the-data-model-and-the-form-model\"><i class=\"material-icons\">link</i></a>The <em>data model</em> and the <em>form model</em></h2>\n<h2 translation-result=\"\" id=\"数据模型与表单模型\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#数据模型与表单模型\"><i class=\"material-icons\">link</i></a><em>数据模型</em>与<em>表单模型</em></h2>\n<p translation-origin=\"off\">At the moment, the form is displaying empty values.\nThe <code>HeroDetailComponent</code> should display values of a hero,\npossibly a hero retrieved from a remote server.</p>\n<p translation-result=\"\">此刻，表单显示的是空值。\n<code>HeroDetailComponent</code>应该显示一个英雄的值，这个值可能接收自远端服务器。</p>\n<p translation-origin=\"off\">In this app, the <code>HeroDetailComponent</code> gets its hero from a parent <code>HeroListComponent</code></p>\n<p translation-result=\"\">在这个应用中，<code>HeroDetailComponent</code>从它的父组件<code>HeroListComponent</code>中取得一个英雄。</p>\n<p translation-origin=\"off\">The <code>hero</code> from the server is the <strong><em>data model</em></strong>.\nThe <code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code> structure is the <strong><em>form model</em></strong>.</p>\n<p translation-result=\"\">来自服务器的<code>hero</code>就是<strong>数据模型</strong>，而<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>的结构就是<strong>表单模型</strong>。</p>\n<p translation-origin=\"off\">The component must copy the hero values in the <em>data model</em> into the <em>form model</em>.\nThere are two important implications:</p>\n<p translation-result=\"\">组件必须把<em>数据模型</em>中的英雄值复制到<em>表单模型</em>中。这里隐含着两个非常重要的点。</p>\n<ol>\n<li>\n<p translation-origin=\"off\">The developer must understand how the properties of the <em>data model</em>\nmap to the properties of the <em>form model</em>.</p>\n<p translation-result=\"\">  开发人员必须理解<em>数据模型</em>是如何映射到<em>表单模型</em>中的属性的。</p>\n</li>\n<li>\n<p translation-origin=\"off\">User changes flow from the DOM elements to the <em>form model</em>, not to the <em>data model</em>.\nThe form controls never update the <em>data model</em>.</p>\n<p translation-result=\"\">  用户修改时的数据流是从DOM元素流向<em>表单模型</em>的，而不是<em>数据模型</em>。表单控件永远不会修改<em>数据模型</em>。</p>\n</li>\n</ol>\n<p translation-origin=\"off\">The <em>form</em> and <em>data</em> model structures need not match exactly.\nYou often present a subset of the <em>data model</em> on a particular screen.\nBut it makes things easier if the shape of the <em>form model</em> is close to the shape of the <em>data model</em>.</p>\n<p translation-result=\"\"><em>表单模型</em>和<em>数据模型</em>的结构并不需要精确匹配。在一个特定的屏幕上，我们通常只会展现<em>数据模型</em>的一个子集。\n但是<em>表单模型</em>的形态越接近<em>数据模型</em>，事情就会越简单。</p>\n<p translation-origin=\"off\">In this <code>HeroDetailComponent</code>, the two models are quite close.</p>\n<p translation-result=\"\">在<code>HeroDetailComponent</code>中，这两个模型是非常接近的。</p>\n<p translation-origin=\"off\">Recall the definition of <code>Hero</code> in <code>data-model.ts</code>:</p>\n<p translation-result=\"\">回忆一下<code>data-model.ts</code>中的<code>Hero</code>定义：</p>\n<code-example path=\"reactive-forms/src/app/data-model.ts\" region=\"model-classes\" title=\"src/app/data-model.ts (classes)\" linenums=\"false\">\nexport class Hero {\n  id = 0;\n  name = '';\n  addresses: Address[];\n}\n\nexport class Address {\n  street = '';\n  city   = '';\n  state  = '';\n  zip    = '';\n}\n\n</code-example>\n<p translation-origin=\"off\">Here, again, is the component's <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code> definition.</p>\n<p translation-result=\"\">这里又是组件的<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>定义。</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-6.component.ts\" region=\"hero-form-model\" title=\"src/app/hero-detail.component.ts (excerpt)\" linenums=\"false\">\nthis.heroForm = this.fb.group({\n  name: ['', <a href=\"api/forms/Validators\" class=\"code-anchor\">Validators</a>.required ],\n  address: this.fb.group({\n    street: '',\n    city: '',\n    state: '',\n    zip: ''\n  }),\n  power: '',\n  sidekick: ''\n});\n\n</code-example>\n<p translation-origin=\"off\">There are two significant differences between these models:</p>\n<p translation-result=\"\">在这些模型中有两点显著的差异：</p>\n<ol>\n<li>\n<p translation-origin=\"off\">The <code>Hero</code> has an <code>id</code>. The form model does not because you generally don't show primary keys to users.</p>\n<p translation-result=\"\"><code>Hero</code>有一个<code>id</code>。表单模型中则没有，因为我们通常不会把主键展示给用户。</p>\n</li>\n<li>\n<p translation-origin=\"off\">The <code>Hero</code> has an array of addresses. This form model presents only one address,\na choice <a href=\"guide/reactive-forms#form-array\" title=\"Form arrays\">revisited below</a>.</p>\n<p translation-result=\"\">  <code>Hero</code>有一个住址数组。这个表单模型只表示了一个住址，<a href=\"guide/reactive-forms#form-array\" title=\"Form arrays\">稍后的修改</a>则可以表示多个。</p>\n</li>\n</ol>\n<p translation-origin=\"off\">Nonetheless, the two models are pretty close in shape and you'll see in a moment how this alignment facilitates copying the <em>data model</em> properties\nto the <em>form model</em> with the <code>patchValue</code> and <code>setValue</code> methods.</p>\n<p translation-result=\"\">虽然如此，这两个模型的形态仍然是非常接近的，我们很快就会看到如何用<code>patchValue</code>和<code>setValue</code>方法来把<em>数据模型</em>拷贝到<em>表单模型</em>中。</p>\n<p translation-origin=\"off\">Take a moment to refactor the <em>address</em> <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code> definition for brevity and clarity as follows:</p>\n<p translation-result=\"\">花一点时间来重构一下<code>address</code>这个<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>定义，来让它更简洁清晰，代码如下：</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-7.component.ts\" region=\"address-form-group\" title=\"src/app/hero-detail-7.component.ts\" linenums=\"false\">\nthis.heroForm = this.fb.group({\n  name: ['', <a href=\"api/forms/Validators\" class=\"code-anchor\">Validators</a>.required ],\n  address: this.fb.group(new Address()), // &#x3C;-- a <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a> with a new address\n  power: '',\n  sidekick: ''\n});\n\n</code-example>\n<p translation-origin=\"off\">Also be sure to update the import from <code>data-model</code> so you can reference the <code>Hero</code> and <code>Address</code> classes:</p>\n<p translation-result=\"\">为了确保从<code>data-model</code>中导入，我们可以引用<code>Hero</code>和<code>Address</code>类：</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-7.component.ts\" region=\"import-address\" title=\"src/app/hero-detail-7.component.ts\" linenums=\"false\">\nimport { Address, Hero, states } from './data-model';\n\n</code-example>\n<a id=\"set-data\"></a>\n<h2 translation-origin=\"off\" id=\"populate-the-form-model-with-setvalue-and-patchvalue\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#populate-the-form-model-with-setvalue-and-patchvalue\"><i class=\"material-icons\">link</i></a>Populate the form model with <em>setValue</em> and <em>patchValue</em></h2>\n<h2 translation-result=\"\" id=\"使用setvalue和patchvalue来操纵表单模型\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#使用setvalue和patchvalue来操纵表单模型\"><i class=\"material-icons\">link</i></a>使用<code>setValue</code>和<code>patchValue</code>来操纵表单模型</h2>\n<p translation-origin=\"off\">Previously you created a control and initialized its value at the same time.\nYou can also initialize or reset the values <em>later</em> with the\n<code>setValue</code> and <code>patchValue</code> methods.</p>\n<p translation-result=\"\">以前，我们创建了控件，并同时初始化它的值。\n我们也可以稍后用<code>setValue</code>和<code>patchValue</code>来初始化或重置这些值。</p>\n<h3 translation-origin=\"off\" id=\"setvalue\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#setvalue\"><i class=\"material-icons\">link</i></a><em>setValue</em></h3>\n<h3 translation-result=\"\" id=\"setvalue-方法\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#setvalue-方法\"><i class=\"material-icons\">link</i></a><em>setValue</em> 方法</h3>\n<p translation-origin=\"off\">With <strong><code>setValue</code></strong>, you assign <em>every</em> form control value <em>at once</em>\nby passing in a data object whose properties exactly match the <em>form model</em> behind the <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>.</p>\n<p translation-result=\"\">借助<strong><code>setValue</code></strong>，我们可以<em>立即</em>设置<em>每个</em>表单控件的值，只要把与<em>表单模型</em>的属性精确匹配的数据模型传进去就可以了。</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-7.component.ts\" region=\"set-value\" title=\"src/app/hero-detail.component.ts (excerpt)\" linenums=\"false\">\nthis.heroForm.setValue({\n  name:    this.hero.name,\n  address: this.hero.addresses[0] || new Address()\n});\n\n</code-example>\n<p translation-origin=\"off\">The <code>setValue</code> method checks the data object thoroughly before assigning any form control values.</p>\n<p translation-result=\"\"><code>setValue</code>方法会在赋值给任何表单控件之前先检查数据对象的值。</p>\n<p translation-origin=\"off\">It will not accept a data object that doesn't match the FormGroup structure or is\nmissing values for any control in the group. This way, it can return helpful\nerror messages if you have a typo or if you've nested controls incorrectly.\n<code>patchValue</code> will fail silently.</p>\n<p translation-result=\"\">它不会接受一个与FormGroup结构不同或缺少表单组中任何一个控件的数据对象。\n这种方式下，如果我们有什么拼写错误或控件嵌套的不正确，它就能返回一些有用的错误信息。\n<code>patchValue</code>会默默地失败。</p>\n<p translation-origin=\"off\">On the other hand,<code>setValue</code> will catch\nthe error and report it clearly.</p>\n<p translation-result=\"\">而<code>setValue</code>会捕获错误，并清晰的报告它。</p>\n<p translation-origin=\"off\">Notice that you can <em>almost</em> use the entire <code>hero</code> as the argument to <code>setValue</code>\nbecause its shape is similar to the component's <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code> structure.</p>\n<p translation-result=\"\">注意，你<em>几乎</em>可以把这个<code>hero</code>用作<code>setValue</code>的参数，因为它的形态与组件的<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>结构是非常像的。</p>\n<p translation-origin=\"off\">You can only show the hero's first address and you must account for the possibility that the <code>hero</code> has no addresses at all.\nThis explains the conditional setting of the <code>address</code> property in the data object argument:</p>\n<p translation-result=\"\">我们现在只能显示英雄的第一个住址，不过我们还必须考虑<code>hero</code>完全没有住址的可能性。\n下面的例子解释了如何在数据对象参数中对<code>address</code>属性进行有条件的设置：</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-7.component.ts\" region=\"set-value-address\" title=\"src/app/hero-detail-7.component.ts\" linenums=\"false\">\naddress: this.hero.addresses[0] || new Address()\n\n</code-example>\n<h3 translation-origin=\"off\" id=\"patchvalue\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#patchvalue\"><i class=\"material-icons\">link</i></a><em>patchValue</em></h3>\n<h3 translation-result=\"\" id=\"patchvalue-方法\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#patchvalue-方法\"><i class=\"material-icons\">link</i></a><em>patchValue</em> 方法</h3>\n<p translation-origin=\"off\">With <strong><code>patchValue</code></strong>, you can assign values to specific controls in a <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>\nby supplying an object of key/value pairs for just the controls of interest.</p>\n<p translation-result=\"\">借助<strong><code>patchValue</code></strong>，我们可以通过提供一个只包含要更新的控件的键值对象来把值赋给<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>中的指定控件。</p>\n<p translation-origin=\"off\">This example sets only the form's <code>name</code> control.</p>\n<p translation-result=\"\">这个例子只会设置表单的<code>name</code>控件。</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-6.component.ts\" region=\"patch-value\" title=\"src/app/hero-detail.component.ts (excerpt)\" linenums=\"false\">\nthis.heroForm.patchValue({\n  name: this.hero.name\n});\n\n</code-example>\n<p translation-origin=\"off\">With <strong><code>patchValue</code></strong> you have more flexibility to cope with wildly divergent data and form models.\nBut unlike <code>setValue</code>,  <code>patchValue</code> cannot check for missing control\nvalues and does not throw helpful errors.</p>\n<p translation-result=\"\">借助<strong><code>patchValue</code></strong>，我们可以更灵活地解决数据模型和表单模型之间的差异。\n但是和<code>setValue</code>不同，<code>patchValue</code>不会检查缺失的控件值，并且不会抛出有用的错误信息。</p>\n<h3 translation-origin=\"off\" id=\"when-to-set-form-model-values-ngonchanges\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#when-to-set-form-model-values-ngonchanges\"><i class=\"material-icons\">link</i></a>When to set form model values (<em>ngOnChanges</em>)</h3>\n<h3 translation-result=\"\" id=\"什么时候设置表单的模型值（ngonchanges）\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#什么时候设置表单的模型值（ngonchanges）\"><i class=\"material-icons\">link</i></a>什么时候设置表单的模型值（<code>ngOnChanges</code>）</h3>\n<p translation-origin=\"off\">Now you know <em>how</em> to set the <em>form model</em> values. But <em>when</em> do you set them?\nThe answer depends upon when the component gets the <em>data model</em> values.</p>\n<p translation-result=\"\">现在，我们已经知道了<em>如何</em>设置<em>表单模型</em>的值，但是<em>什么时候</em>设置它门呢？\n答案取决于组件何时得到<em>数据模型</em>的值。</p>\n<p translation-origin=\"off\">The <code>HeroDetailComponent</code> in this reactive forms sample is nested within a <em>master/detail</em> <code>HeroListComponent</code> (<a href=\"guide/reactive-forms#hero-list\">discussed below</a>).\nThe <code>HeroListComponent</code> displays hero names to the user.\nWhen the user clicks on a hero, the list component passes the selected hero into the <code>HeroDetailComponent</code>\nby binding to its <code>hero</code> input property.</p>\n<p translation-result=\"\">这个响应式表单范例中的<code>HeroDetailComponent</code>组件嵌套在一个<em>主/从</em>结构的<code>HeroListComponent</code>（<a href=\"guide/reactive-forms#hero-list\">稍后讨论</a>）中。\n<code>HeroListComponent</code>组件把英雄的名字显示给用户。\n当用户点击一个英雄时，列表组件把所选的英雄通过输入属性<code>hero</code>传给<code>HeroDetailComponent</code>。</p>\n<code-example path=\"reactive-forms/src/app/hero-list.component.1.html\" title=\"hero-list.component.html (simplified)\" linenums=\"false\">\n&#x3C;nav>\n  &#x3C;a *ngFor=\"let hero of heroes | async\" (click)=\"select(hero)\">{{hero.name}}&#x3C;/a>\n&#x3C;/nav>\n\n&#x3C;div *<a href=\"api/common/NgIf\" class=\"code-anchor\">ngIf</a>=\"selectedHero\">\n  &#x3C;app-hero-detail [hero]=\"selectedHero\">&#x3C;/app-hero-detail>\n&#x3C;/div>\n\n\n</code-example>\n<p translation-origin=\"off\">In this approach, the value of <code>hero</code> in the <code>HeroDetailComponent</code> changes\nevery time the user selects a new hero.\nYou should call  <em>setValue</em> in the <a href=\"guide/lifecycle-hooks#onchanges\">ngOnChanges</a>\nhook, which Angular calls whenever the input <code>hero</code> property changes\nas the following steps demonstrate.</p>\n<p translation-result=\"\">这种方式下，每当用户选择一个新英雄时，<code>HeroDetailComponent</code>中的<code>hero</code>值就会发生变化。\n我们可以在<a href=\"guide/lifecycle-hooks#onchanges\">ngOnChanges</a>钩子中调用<code>setValue</code>，就像例子中所演示的那样，\n每当输入属性<code>hero</code>发生变化时，Angular就会调用它。</p>\n<p translation-origin=\"off\">First, import the <code><a href=\"api/core/OnChanges\" class=\"code-anchor\">OnChanges</a></code> and <code><a href=\"api/core/Input\" class=\"code-anchor\">Input</a></code> symbols in <code>hero-detail.component.ts</code>.</p>\n<p translation-result=\"\">首先，在<code>hero-detail.component.ts</code>中导入<code><a href=\"api/core/OnChanges\" class=\"code-anchor\">OnChanges</a></code>和<code><a href=\"api/core/Input\" class=\"code-anchor\">Input</a></code>符号。</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-6.component.ts\" region=\"import-input\" title=\"src/app/hero-detail.component.ts (core imports)\" linenums=\"false\">\nimport { <a href=\"api/core/Component\" class=\"code-anchor\">Component</a>, <a href=\"api/core/Input\" class=\"code-anchor\">Input</a>, <a href=\"api/core/OnChanges\" class=\"code-anchor\">OnChanges</a> }             from '@angular/core';\n\n</code-example>\n<p translation-origin=\"off\">Add the <code>hero</code> input property.</p>\n<p translation-result=\"\">添加输入属性<code>hero</code>。</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-6.component.ts\" region=\"hero\" title=\"src/app/hero-detail-6.component.ts\" linenums=\"false\">\n@<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>() hero: Hero;\n\n</code-example>\n<p translation-origin=\"off\">Add the <code>ngOnChanges</code> method to the class as follows:</p>\n<p translation-result=\"\">向该类中添加<code>ngOnChanges</code>方法，代码如下：</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-7.component.ts\" region=\"ngOnChanges-1\" title=\"src/app/hero-detail.component.ts (ngOnchanges)\" linenums=\"false\">\nngOnChanges()\n  this.heroForm.setValue({\n    name:    this.hero.name,\n    address: this.hero.addresses[0] || new Address()\n  });\n}\n\n</code-example>\n<h3 translation-origin=\"off\" id=\"reset-the-form-flags\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#reset-the-form-flags\"><i class=\"material-icons\">link</i></a><em>reset</em> the form flags</h3>\n<h3 translation-result=\"\" id=\"重置表单的标识。\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#重置表单的标识。\"><i class=\"material-icons\">link</i></a><em>重置</em>表单的标识。</h3>\n<p translation-origin=\"off\">You should  reset the form when the hero changes so that\ncontrol values from the previous hero are cleared and\nstatus flags are restored to the <em>pristine</em> state.\nYou could call <code>reset</code> at the top of <code>ngOnChanges</code> like this.</p>\n<p translation-result=\"\">我们应该在更换英雄的时候重置表单，以便来自前一个英雄的控件值被清除，并且其状态被恢复为<code>pristine</code>（原始）状态。\n我们可以在<code>ngOnChanges</code>的顶部调用<code>reset</code>，就像这样：</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-7.component.ts\" region=\"reset\" title=\"src/app/hero-detail-7.component.ts\" linenums=\"false\">\nthis.heroForm.reset();\n\n</code-example>\n<p translation-origin=\"off\">The <code>reset</code> method has an optional <code>state</code> value so you can reset the flags <em>and</em> the control values at the same time.\nInternally, <code>reset</code> passes the argument to <code>setValue</code>.\nA little refactoring and <code>ngOnChanges</code> becomes this:</p>\n<p translation-result=\"\"><code>reset</code>方法有一个可选的<code>state</code>值，让我们能在重置状态的同时<em>顺便设置</em>控件的值。\n在内部实现上，<code>reset</code>会把该参数传给了<code>setValue</code>。\n略微重构之后，<code>ngOnChanges</code>会变成这样：</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-7.component.ts\" region=\"ngOnChanges\" title=\"src/app/hero-detail.component.ts (ngOnchanges - revised)\" linenums=\"false\">\nngOnChanges() {\n  this.heroForm.reset({\n    name: this.hero.name,\n    address: this.hero.addresses[0] || new Address()\n  });\n}\n\n</code-example>\n<a id=\"hero-list\"></a>\n<h3 translation-origin=\"off\" id=\"create-the-herolistcomponent-and-heroservice\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#create-the-herolistcomponent-and-heroservice\"><i class=\"material-icons\">link</i></a>Create the <em>HeroListComponent</em> and <em>HeroService</em></h3>\n<h3 translation-result=\"\" id=\"创建herolistcomponent和heroservice\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#创建herolistcomponent和heroservice\"><i class=\"material-icons\">link</i></a>创建<code>HeroListComponent</code>和<code>HeroService</code></h3>\n<p translation-origin=\"off\">The <code>HeroDetailComponent</code> is a nested sub-component of the <code>HeroListComponent</code> in a <em>master/detail</em> view.\nTogether they look a bit like this:</p>\n<p translation-result=\"\"><code>HeroDetalComponent</code>是一个嵌套在<code>HeroListComponent</code>的<em>主从</em>视图中的子组件。如果把它们放在一起就是这样的：</p>\n<figure>\n  <img src=\"generated/images/guide/reactive-forms/hero-list.png\" alt=\"HeroListComponent\" width=\"420\" height=\"264\">\n</figure>\n<p translation-origin=\"off\">The <code>HeroListComponent</code> uses an injected <code>HeroService</code> to retrieve heroes from the server\nand then presents those heroes to the user as a series of buttons.\nThe <code>HeroService</code> emulates an HTTP service.\nIt returns an <code>Observable</code> of heroes that resolves after a short delay,\nboth to simulate network latency and to indicate visually\nthe necessarily asynchronous nature of the application.</p>\n<p translation-result=\"\"><code>HeroListComponent</code>使用一个注入进来的<code>HeroService</code>来从服务器获取英雄列表，然后用一系列按钮把这些英雄展示给用户。\n<code>HeroService</code>模拟了HTTP服务。\n它返回一个英雄组成的<code>Observable</code>对象，并会在短暂的延迟之后被解析出来，这是为了模拟网络延迟，并展示应用在自然延迟下的异步效果。</p>\n<p translation-origin=\"off\">When the user clicks on a hero,\nthe component sets its <code>selectedHero</code> property which\nis bound to the <code>hero</code> input property of the <code>HeroDetailComponent</code>.\nThe <code>HeroDetailComponent</code> detects the changed hero and re-sets its form\nwith that hero's data values.</p>\n<p translation-result=\"\">当用户点击一个英雄时，组件设置它的<code>selectedHero</code>属性，它绑定到<code>HeroDetailComponent</code>的输入属性<code>hero</code>上。\n<code>HeroDetailComponent</code>检测到英雄的变化，并使用当前英雄的值重置此表单。</p>\n<p translation-origin=\"off\">A \"Refresh\" button clears the hero list and the current selected hero before refetching the heroes.</p>\n<p translation-result=\"\">\"刷新\"按钮清除英雄列表和当前选中的英雄，然后重新获取英雄列表。</p>\n<p translation-origin=\"off\">The remaining <code>HeroListComponent</code> and <code>HeroService</code> implementation details are not relevant to understanding reactive forms.\nThe techniques involved are covered elsewhere in the documentation, including the <em>Tour of Heroes</em>\n<a href=\"tutorial/toh-pt3\" title=\"ToH: Multiple Components\">here</a> and <a href=\"tutorial/toh-pt4\" title=\"ToH: Services\">here</a>.</p>\n<p translation-result=\"\"><code>HeroListComponent</code>和<code>HeroService</code>的其余部分的实现细节与响应式表单无关。\n那些技术涵盖于本文档中的其它部分，包括<em>《英雄指南》</em>中的<a href=\"tutorial/toh-pt3\" title=\"ToH: Multiple Components\">这里</a>和<a href=\"tutorial/toh-pt4\" title=\"ToH: Services\">这里</a>。</p>\n<p translation-origin=\"off\">If you're coding along with the steps in this reactive forms tutorial,\ncreate the pertinent files based on the\n<a href=\"guide/reactive-forms#source-code\" title=\"Reactive Forms source code\">source code displayed below</a>.\nNotice that <code>hero-list.component.ts</code> imports <code>Observable</code> and <code>finally</code> while <code>hero.service.ts</code> imports <code>Observable</code>, <code>of</code>,\nand <code>delay</code> from <code>rxjs</code>.\nThen return here to learn about <em>form array</em> properties.</p>\n<p translation-result=\"\">如果你正在随着本教程写代码，可以基于<a href=\"guide/reactive-forms#source-code\" title=\"Reactive Forms source code\">下面显示的代码</a>来创建相应的文件。\n注意，<code>hero-list.component.ts</code>从<code>rxjs</code>中导入了<code>Observable</code>和<code>finally</code>，而<code>hero.service.ts</code>导入了<code>Observable</code>、<code>of</code>和<code>delay</code>。\n接下来我们回到正轨，继续学习<em>表单数组</em>属性。</p>\n<a id=\"form-array\"></a>\n<h2 translation-origin=\"off\" id=\"use-formarray-to-present-an-array-of-formgroups\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#use-formarray-to-present-an-array-of-formgroups\"><i class=\"material-icons\">link</i></a>Use <em>FormArray</em> to present an array of <em>FormGroups</em></h2>\n<h2 translation-result=\"\" id=\"使用formarray来表示formgroup数组\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#使用formarray来表示formgroup数组\"><i class=\"material-icons\">link</i></a>使用<code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code>来表示<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>数组</h2>\n<p translation-origin=\"off\">So far, you've seen <code>FormControls</code> and <code>FormGroups</code>.\nA <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code> is a named object whose property values are <code>FormControls</code> and other <code>FormGroups</code>.</p>\n<p translation-result=\"\">以前，我们见过了<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>和<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>。\n<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>是一个命名对象，它的属性值是<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>和其它的<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>。</p>\n<p translation-origin=\"off\">Sometimes you need to present an arbitrary number of controls or groups.\nFor example, a hero may have zero, one, or any number of addresses.</p>\n<p translation-result=\"\">有时我们得表示任意数量的控件或控件组。\n比如，一个英雄可能拥有0、1或任意数量的住址。</p>\n<p translation-origin=\"off\">The <code>Hero.addresses</code> property is an array of <code>Address</code> instances.\nAn <em>address</em> <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code> can display one <code>Address</code>.\nAn Angular <code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code> can display an array of <em>address</em> <code>FormGroups</code>.</p>\n<p translation-result=\"\"><code>Hero.addresses</code>属性就是一个<code>Address</code>实例的数组。\n一个住址的<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>可以显示一个<code>Address</code>对象。\n而<code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code>可以显示一个住址<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>的数组。</p>\n<p translation-origin=\"off\">To get access to the <code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code> class, import it into <code>hero-detail.component.ts</code>:</p>\n<p translation-result=\"\">要访问<code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code>类，请先把它导入<code>hero-detail.component.ts</code>中：</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-8.component.ts\" region=\"imports\" title=\"src/app/hero-detail.component.ts (excerpt)\" linenums=\"false\">\nimport { <a href=\"api/core/Component\" class=\"code-anchor\">Component</a>, <a href=\"api/core/Input\" class=\"code-anchor\">Input</a>, <a href=\"api/core/OnChanges\" class=\"code-anchor\">OnChanges</a> }                   from '@angular/core';\nimport { <a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a>, <a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a>, <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a>, <a href=\"api/forms/Validators\" class=\"code-anchor\">Validators</a> } from '@angular/forms';\n\nimport { Address, Hero, states } from './data-model';\n\n</code-example>\n<p translation-origin=\"off\">To <em>work</em> with a <code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code> you do the following:</p>\n<p translation-result=\"\">要想使用<code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code>，我们要这么做：</p>\n<ol>\n<li>\n<p translation-origin=\"off\">Define the items (<code>FormControls</code> or <code>FormGroups</code>) in the array.</p>\n<p translation-result=\"\">在数组中定义条目（<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>或<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>）。</p>\n</li>\n<li>\n<p translation-origin=\"off\">Initialize the array with items created from data in the <em>data model</em>.</p>\n<p translation-result=\"\">把这个数组初始化微一组从<em>数据模型</em>中的数据创建的条目。</p>\n</li>\n<li>\n<p translation-origin=\"off\">Add and remove items as the user requires.</p>\n<p translation-result=\"\">根据用户的需求添加或移除这些条目。</p>\n</li>\n</ol>\n<p translation-origin=\"off\">In this guide, you define a <code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code> for <code>Hero.addresses</code> and\nlet the user add or modify addresses (removing addresses is your homework).</p>\n<p translation-result=\"\">在本章中，我们为<code>Hero.addresses</code>定义了一个<code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code>，并且让用户添加或修改这些住址（移除住址功能请课后自行实现）。</p>\n<p translation-origin=\"off\">You’ll need to redefine the form model in the <code>HeroDetailComponent</code> constructor,\nwhich currently only displays the first hero address in an <em>address</em> <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>.</p>\n<p translation-result=\"\">我们需要在<code>HeroDetailComponent</code>的构造函数中重新定义表单模型，它现在只用<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>显示第一个英雄住址。</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-7.component.ts\" region=\"address-form-group\" title=\"src/app/hero-detail-7.component.ts\" linenums=\"false\">\nthis.heroForm = this.fb.group({\n  name: ['', <a href=\"api/forms/Validators\" class=\"code-anchor\">Validators</a>.required ],\n  address: this.fb.group(new Address()), // &#x3C;-- a <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a> with a new address\n  power: '',\n  sidekick: ''\n});\n\n</code-example>\n<h3 translation-origin=\"off\" id=\"from-address-to-secret-lairs\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#from-address-to-secret-lairs\"><i class=\"material-icons\">link</i></a>From <em>address</em> to <em>secret lairs</em></h3>\n<h3 translation-result=\"\" id=\"从住址到秘密小屋（secret-lair）\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#从住址到秘密小屋（secret-lair）\"><i class=\"material-icons\">link</i></a>从<em>住址</em>到<em>秘密小屋</em>（Secret Lair）</h3>\n<p translation-origin=\"off\">From the user's point of view, heroes don't have <em>addresses</em>.\n<em>Addresses</em> are for mere mortals. Heroes have <em>secret lairs</em>!\nReplace the <em>address</em> <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code> definition with a <em>secretLairs</em> <code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code> definition:</p>\n<p translation-result=\"\">从用户的视角来看，英雄们没有<em>住址</em>。\n只有我们凡人才有<em>住址</em>，英雄们拥有的是<em>秘密小屋</em>！\n把<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>型的住址替换为<code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code>型的<code>secretLairs</code>定义：</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-8.component.ts\" region=\"secretLairs-form-array\" title=\"src/app/hero-detail-8.component.ts\" linenums=\"false\">\nthis.heroForm = this.fb.group({\n  name: ['', <a href=\"api/forms/Validators\" class=\"code-anchor\">Validators</a>.required ],\n  secretLairs: this.fb.array([]), // &#x3C;-- secretLairs as an empty <a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a>\n  power: '',\n  sidekick: ''\n});\n\n</code-example>\n<div class=\"alert is-helpful\">\n<p translation-origin=\"off\">Changing the form control name from <code>address</code> to <code>secretLairs</code> drives home an important point:\nthe <em>form model</em> doesn't have to match the <em>data model</em>.</p>\n<p translation-result=\"\">把表单的控件名从<code>address</code>改为<code>secretLairs</code>让我们遇到了一个重要问题：<em>表单模型</em>与<em>数据模型</em>不再匹配了。</p>\n<p translation-origin=\"off\">Obviously there has to be a relationship between the two.\nBut it can be anything that makes sense within the application domain.</p>\n<p translation-result=\"\">显然，必须在两者之间建立关联。但它在应用领域中的意义不限于此，它可以用于任何东西。</p>\n<p translation-origin=\"off\"><em>Presentation</em> requirements often differ from <em>data</em> requirements.\nThe reactive forms approach both emphasizes and facilitates this distinction.</p>\n<p translation-result=\"\"><em>展现</em>的需求经常会与<em>数据</em>的需求不同。\n响应式表单的方法既强调这种差异，也能为这种差异提供了便利。</p>\n</div>\n<h3 translation-origin=\"off\" id=\"initialize-the-secretlairs-formarray\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#initialize-the-secretlairs-formarray\"><i class=\"material-icons\">link</i></a>Initialize the \"secretLairs\" <em>FormArray</em></h3>\n<h3 translation-result=\"\" id=\"初始化formarray型的secretlairs\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#初始化formarray型的secretlairs\"><i class=\"material-icons\">link</i></a>初始化<code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code>型的<code>secretLairs</code></h3>\n<p translation-origin=\"off\">The default form displays a nameless hero with no addresses.</p>\n<p translation-result=\"\">默认的表单显示一个无地址的无名英雄。</p>\n<p translation-origin=\"off\">You need a method to populate (or repopulate) the <em>secretLairs</em> with actual hero addresses whenever\nthe parent <code>HeroListComponent</code> sets the <code>HeroDetailComponent.hero</code> input property to a new <code>Hero</code>.</p>\n<p translation-result=\"\">我们需要一个方法来用实际英雄的地址填充（或重新填充）<code>secretLairs</code>，\n而不用管父组件<code>HeroListComponent</code>何时把输入属性<code>HeroDetailComponent.hero</code>设置为一个新的<code>Hero</code>。</p>\n<p translation-origin=\"off\">The following <code>setAddresses</code> method replaces the <em>secretLairs</em> <code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code> with a new <code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code>,\ninitialized by an array of hero address <code>FormGroups</code>.</p>\n<p translation-result=\"\">下面的<code>setAddresses</code>方法把<code>secretLairs</code>数组替换为一个新的<code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code>，使用一组表示英雄地址的<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>来进行初始化。</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-8.component.ts\" region=\"set-addresses\" title=\"src/app/hero-detail-8.component.ts\" linenums=\"false\">\nsetAddresses(addresses: Address[]) {\n  const addressFGs = addresses.map(address => this.fb.group(address));\n  const addressFormArray = this.fb.array(addressFGs);\n  this.heroForm.setControl('secretLairs', addressFormArray);\n}\n\n</code-example>\n<p translation-origin=\"off\">Notice that you replace the previous <code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code> with the <strong><code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a>.setControl</code> method</strong>, not with <code>setValue</code>.\nYou're replacing a <em>control</em>, not the <em>value</em> of a control.</p>\n<p translation-result=\"\">注意，我们使用<strong><code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a>.setControl</code>方法</strong>，而不是<code>setValue</code>方法来设置前一个<code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code>。\n我们所要替换的是<em>控件</em>，而不是控件的<em>值</em>。</p>\n<p translation-origin=\"off\">Notice also that the <em>secretLairs</em> <code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code> contains <strong><code>FormGroups</code></strong>, not <code>Addresses</code>.</p>\n<p translation-result=\"\">还要注意，<code>secretLairs</code>数组中包含的是**<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>，而不是<code>Address</code>。</p>\n<h3 translation-origin=\"off\" id=\"get-the-formarray\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#get-the-formarray\"><i class=\"material-icons\">link</i></a>Get the <em>FormArray</em></h3>\n<h3 translation-result=\"\" id=\"获取formarray\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#获取formarray\"><i class=\"material-icons\">link</i></a>获取<code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code></h3>\n<p translation-origin=\"off\">The <code>HeroDetailComponent</code> should be able to display, add, and remove items from the <em>secretLairs</em> <code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code>.</p>\n<p translation-result=\"\"><code>HeroDetailComponent</code>应该能从<code>secretLairs</code>中显示、添加和删除条目。</p>\n<p translation-origin=\"off\">Use the <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a>.get</code> method to acquire a reference to that <code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code>.\nWrap the expression in a <code>secretLairs</code> convenience property for clarity and re-use.</p>\n<p translation-result=\"\">使用<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a>.get</code>方法来获取到<code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code>的引用。\n把这个表达式包装进一个名叫<code>secretLairs</code>的便捷属性中来让它更清晰，并供复用。</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-8.component.ts\" region=\"get-secret-lairs\" title=\"src/app/hero-detail.component.ts (secretLayers property)\" linenums=\"false\">\nget secretLairs(): <a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a> {\n  return this.heroForm.get('secretLairs') as <a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a>;\n};\n\n</code-example>\n<h3 translation-origin=\"off\" id=\"display-the-formarray\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#display-the-formarray\"><i class=\"material-icons\">link</i></a>Display the <em>FormArray</em></h3>\n<h3 translation-result=\"\" id=\"显示formarray\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#显示formarray\"><i class=\"material-icons\">link</i></a>显示<code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code></h3>\n<p translation-origin=\"off\">The current HTML template displays a single <em>address</em> <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>.\nRevise it to display zero, one, or more of the hero's <em>address</em> <code>FormGroups</code>.</p>\n<p translation-result=\"\">当前HTML模板显示单个的地址<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>。\n我们要把它修改成能显示0、1或更多个表示英雄地址的<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>。</p>\n<p translation-origin=\"off\">This is mostly a matter of wrapping the previous template HTML for an address in a <code>&#x3C;div></code> and\nrepeating that <code>&#x3C;div></code> with <code>*ngFor</code>.</p>\n<p translation-result=\"\">要改的部分主要是把以前表示地址的HTML模板包裹进一个<code>&#x3C;div></code>中，并且使用<code>*ngFor</code>来重复渲染这个<code>&#x3C;div></code>。</p>\n<p translation-origin=\"off\">The trick lies in knowing how to write the <code>*ngFor</code>. There are three key points:</p>\n<p translation-result=\"\">诀窍在于要知道如何编写<code>*ngFor</code>。主要有三点：</p>\n<ol>\n<li>\n<p translation-origin=\"off\">Add another wrapping <code>&#x3C;div></code>, around the <code>&#x3C;div></code> with <code>*ngFor</code>, and\nset its <code>formArrayName</code> directive to <code>\"secretLairs\"</code>.\nThis step establishes the <em>secretLairs</em> <code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code> as the context for form controls in the inner, repeated HTML template.</p>\n<p translation-result=\"\">  在<code>*ngFor</code>的<code>&#x3C;div></code>之外套上另一个包装<code>&#x3C;div></code>，并且把它的<code>formArrayName</code>指令设为<code>\"secretLairs\"</code>。\n这一步为内部的表单控件建立了一个<code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code>型的<code>secretLairs</code>作为上下文，以便重复渲染HTML模板。</p>\n</li>\n<li>\n<p translation-origin=\"off\">The source of the repeated items is the <code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a>.controls</code>, not the <code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code> itself.\nEach control is an <em>address</em> <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>, exactly what the previous (now repeated) template HTML expected.</p>\n<p translation-result=\"\">  这些重复条目的数据源是<code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a>.controls</code>而不是<code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code>本身。\n每个控件都是一个<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>型的地址对象，与以前的模板HTML所期望的格式完全一样。</p>\n</li>\n<li>\n<p translation-origin=\"off\">Each repeated <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code> needs a unique <code>formGroupName</code> which must be the index of the <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code> in the <code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code>.\nYou'll re-use that index to compose a unique label for each address.</p>\n<p translation-result=\"\">  每个被重复渲染的<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>都需要一个独一无二的<code>formGroupName</code>，它必须是<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>在这个<code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code>中的索引。\n我们将复用这个索引，以便为每个地址组合出一个独一无二的标签。</p>\n</li>\n</ol>\n<p translation-origin=\"off\">Here's the skeleton for the <em>secret lairs</em> section of the HTML template:</p>\n<p translation-result=\"\">下面是HTML模板中<em>秘密小屋</em>部分的代码骨架：</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-8.component.html\" region=\"form-array-skeleton\" title=\"src/app/hero-detail.component.html (*ngFor)\" linenums=\"false\">\n&#x3C;div formArrayName=\"secretLairs\" class=\"well well-lg\">\n  &#x3C;div *ngFor=\"let address of secretLairs.controls; let i=index\" [formGroupName]=\"i\" >\n    &#x3C;!-- The repeated address template -->\n  &#x3C;/div>\n&#x3C;/div>\n\n</code-example>\n<p translation-origin=\"off\">Here's the complete template for the <em>secret lairs</em> section:</p>\n<p translation-result=\"\">这里是<em>秘密小屋</em>部分的完整模板：</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-8.component.html\" region=\"form-array\" title=\"src/app/hero-detail.component.html (excerpt)\">\n&#x3C;div formArrayName=\"secretLairs\" class=\"well well-lg\">\n  &#x3C;div *ngFor=\"let address of secretLairs.controls; let i=index\" [formGroupName]=\"i\" >\n    &#x3C;!-- The repeated address template -->\n    &#x3C;h4>Address #{{i + 1}}&#x3C;/h4>\n    &#x3C;div style=\"margin-left: 1em;\">\n      &#x3C;div class=\"form-group\">\n        &#x3C;label class=\"center-block\">Street:\n          &#x3C;input class=\"form-control\" formControlName=\"street\">\n        &#x3C;/label>\n      &#x3C;/div>\n      &#x3C;div class=\"form-group\">\n        &#x3C;label class=\"center-block\">City:\n          &#x3C;input class=\"form-control\" formControlName=\"city\">\n        &#x3C;/label>\n      &#x3C;/div>\n      &#x3C;div class=\"form-group\">\n        &#x3C;label class=\"center-block\">State:\n          &#x3C;select class=\"form-control\" formControlName=\"state\">\n            &#x3C;<a href=\"api/forms/NgSelectOption\" class=\"code-anchor\">option</a> *ngFor=\"let state of states\" [value]=\"state\">{{state}}&#x3C;/<a href=\"api/forms/NgSelectOption\" class=\"code-anchor\">option</a>>\n          &#x3C;/select>\n        &#x3C;/label>\n      &#x3C;/div>\n      &#x3C;div class=\"form-group\">\n        &#x3C;label class=\"center-block\">Zip Code:\n          &#x3C;input class=\"form-control\" formControlName=\"zip\">\n        &#x3C;/label>\n      &#x3C;/div>\n    &#x3C;/div>\n    &#x3C;br>\n    &#x3C;!-- End of the repeated address template -->\n  &#x3C;/div>\n&#x3C;/div>\n\n</code-example>\n<h3 translation-origin=\"off\" id=\"add-a-new-lair-to-the-formarray\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#add-a-new-lair-to-the-formarray\"><i class=\"material-icons\">link</i></a>Add a new lair to the <em>FormArray</em></h3>\n<h3 translation-result=\"\" id=\"把新的小屋添加到formarray中\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#把新的小屋添加到formarray中\"><i class=\"material-icons\">link</i></a>把新的小屋添加到<code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code>中</h3>\n<p translation-origin=\"off\">Add an <code>addLair</code> method that gets the <em>secretLairs</em> <code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code> and appends a new <em>address</em> <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code> to it.</p>\n<p translation-result=\"\">添加一个<code>addLair</code>方法，它获取<code>secretLairs</code>数组，并把新的表示地址的<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>添加到其中。</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-8.component.ts\" region=\"add-lair\" title=\"src/app/hero-detail.component.ts (addLair method)\" linenums=\"false\">\naddLair() {\n  this.secretLairs.push(this.fb.group(new Address()));\n}\n\n</code-example>\n<p translation-origin=\"off\">Place a button on the form so the user can add a new <em>secret lair</em> and wire it to the component's <code>addLair</code> method.</p>\n<p translation-result=\"\">把一个按钮放在表单中，以便用户可以添加新的<em>秘密小屋</em>，并把它传给组件的<code>addLair</code>方法。</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-8.component.html\" region=\"add-lair\" title=\"src/app/hero-detail.component.html (addLair button)\" linenums=\"false\">\n&#x3C;button (click)=\"addLair()\" type=\"button\">Add a Secret Lair&#x3C;/button>\n\n</code-example>\n<div class=\"alert is-important\">\n<p translation-origin=\"off\">Be sure to <strong>add the <code>type=\"button\"</code> attribute</strong>.\nIn fact, you should always specify a button's <code>type</code>.\nWithout an explicit type, the button type defaults to \"submit\".\nWhen you later add a <em>form submit</em> action, every \"submit\" button triggers the submit action which\nmight do something like save the current changes.\nYou do not want to save changes when the user clicks the <em>Add a Secret Lair</em> button.</p>\n<p translation-result=\"\">务必确保<strong>添加了<code>type=\"button\"</code>属性</strong>。\n事实上，我们应该总是指定按钮的<code>type</code>。\n如果不明确指定类型，按钮的默认类型就是“submit”（提交）。\n当我们稍后添加了<em>表单提交</em>的动作时，每个“submit”按钮都是触发一次提交操作，而它将可能会做一些处理，比如保存当前的修改。\n我们显然不会希望每当用户点击“Add a Secret Lair”按钮时就保存一次。</p>\n</div>\n<h3 translation-origin=\"off\" id=\"try-it\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#try-it\"><i class=\"material-icons\">link</i></a>Try it!</h3>\n<h3 translation-result=\"\" id=\"试试看！\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#试试看！\"><i class=\"material-icons\">link</i></a>试试看！</h3>\n<p translation-origin=\"off\">Back in the browser, select the hero named \"Magneta\".\n\"Magneta\" doesn't have an address, as you can see in the diagnostic JSON at the bottom of the form.</p>\n<p translation-result=\"\">回到浏览器中，选择名叫“Magneta”的英雄。\n\"Magneta\"没有地址，我们会在表单底部的诊断用JSON中看到这一点。</p>\n<figure>\n  <img src=\"generated/images/guide/reactive-forms/addresses-array.png\" alt=\"JSON output of addresses array\" width=\"400\" height=\"40\">\n</figure>\n<p translation-origin=\"off\">Click the \"<em>Add a Secret Lair</em>\" button.\nA new address section appears. Well done!</p>\n<p translation-result=\"\">点击“Add a Secret Lair”按钮，一个新的地址区就出现了，干得好！</p>\n<h3 translation-origin=\"off\" id=\"remove-a-lair\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#remove-a-lair\"><i class=\"material-icons\">link</i></a>Remove a lair</h3>\n<h3 translation-result=\"\" id=\"移除一个小屋\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#移除一个小屋\"><i class=\"material-icons\">link</i></a>移除一个小屋</h3>\n<p translation-origin=\"off\">This example can <em>add</em> addresses but it can't <em>remove</em> them.\nFor extra credit, write a <code>removeLair</code> method and wire it to a button on the repeating address HTML.</p>\n<p translation-result=\"\">这个例子可以<em>添加</em>地址，但是还不能<em>移除</em>它们。\n作为练习，你可以自己写一个<code>removeLair</code>方法，并且把它关联到地址HTML模板的一个按钮上。</p>\n<a id=\"observe-control\"></a>\n<h2 translation-origin=\"off\" id=\"observe-control-changes\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#observe-control-changes\"><i class=\"material-icons\">link</i></a>Observe control changes</h2>\n<h2 translation-result=\"\" id=\"监视控件的变化\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#监视控件的变化\"><i class=\"material-icons\">link</i></a>监视控件的变化</h2>\n<p translation-origin=\"off\">Angular calls <code>ngOnChanges</code> when the user picks a hero in the parent <code>HeroListComponent</code>.\nPicking a hero changes the <code>HeroDetailComponent.hero</code> input property.</p>\n<p translation-result=\"\">每当用户在父组件<code>HeroListComponent</code>中选取了一个英雄，Angular就会调用一次<code>ngOnChanges</code>。\n选取英雄会修改输入属性<code>HeroDetailComponent.hero</code>。</p>\n<p translation-origin=\"off\">Angular does <em>not</em> call <code>ngOnChanges</code> when the user modifies the hero's <em>name</em> or <em>secret lairs</em>.\nFortunately, you can learn about such changes by subscribing to one of the form control properties\nthat raises a change event.</p>\n<p translation-result=\"\">当用户修改英雄的<em>名字</em>或<em>秘密小屋</em>时，Angular<em>并不会</em>调用<code>ngOnChanges</code>。\n幸运的是，我们可以通过订阅表单控件的属性之一来了解这些变化，此属性会发出变更通知。</p>\n<p translation-origin=\"off\">These are properties, such as <code>valueChanges</code>, that return an RxJS <code>Observable</code>.\nYou don't need to know much about RxJS <code>Observable</code> to monitor form control values.</p>\n<p translation-result=\"\">有一些属性，比如<code>valueChanges</code>，可以返回一个RxJS的<code>Observable</code>对象。\n要监听控件值的变化，我们并不需要对RxJS的<code>Observable</code>了解更多。</p>\n<p translation-origin=\"off\">Add the following method to log changes to the value of the <em>name</em> <code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>.</p>\n<p translation-result=\"\">添加下列方法，以监听姓名这个<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>中值的变化。</p>\n<code-example path=\"reactive-forms/src/app/hero-detail.component.ts\" region=\"log-name-change\" title=\"src/app/hero-detail.component.ts (logNameChange)\" linenums=\"false\">\nnameChangeLog: string[] = [];\nlogNameChange() {\n  const nameControl = this.heroForm.get('name');\n  nameControl.valueChanges.forEach(\n    (value: string) => this.nameChangeLog.push(value)\n  );\n}\n\n</code-example>\n<p translation-origin=\"off\">Call it in the constructor, after creating the form.</p>\n<p translation-result=\"\">在构造函数中调用它，就在创建表单的代码之后：</p>\n<code-example path=\"reactive-forms/src/app/hero-detail-8.component.ts\" region=\"ctor\" title=\"src/app/hero-detail-8.component.ts\" linenums=\"false\">\nconstructor(private fb: <a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a>) {\n  this.createForm();\n  this.logNameChange();\n}\n\n</code-example>\n<p translation-origin=\"off\">The <code>logNameChange</code> method pushes name-change values into a <code>nameChangeLog</code> array.\nDisplay that array at the bottom of the component template with this <code>*ngFor</code> binding:</p>\n<p translation-result=\"\"><code>logNameChange</code>方法会把一条改名记录追加到<code>nameChangeLog</code>数组中。\n用<code>*ngFor</code>绑定在组件模板的底部显示这个数组：</p>\n<code-example path=\"reactive-forms/src/app/hero-detail.component.html\" region=\"name-change-log\" title=\"src/app/hero-detail.component.html (Name change log)\" linenums=\"false\">\n&#x3C;h4>Name change log&#x3C;/h4>\n&#x3C;div *ngFor=\"let name of nameChangeLog\">{{name}}&#x3C;/div>\n\n</code-example>\n<p translation-origin=\"off\">Return to the browser, select a hero (e.g, \"Magneta\"), and start typing in the <em>name</em> input box.\nYou should see a new name in the log after each keystroke.</p>\n<p translation-result=\"\">返回浏览器，选择一个英雄（比如“Magneta”），并开始在<em>姓名</em>输入框中键入。\n我们会看到，每次按键都会记录一个新名字。</p>\n<h3 translation-origin=\"off\" id=\"when-to-use-it\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#when-to-use-it\"><i class=\"material-icons\">link</i></a>When to use it</h3>\n<h3 translation-result=\"\" id=\"什么时候用它\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#什么时候用它\"><i class=\"material-icons\">link</i></a>什么时候用它</h3>\n<p translation-origin=\"off\">An interpolation binding is the easier way to <em>display</em> a name change.\nSubscribing to an observable form control property is handy for triggering\napplication logic <em>within</em> the component class.</p>\n<p translation-result=\"\">插值表达式绑定时显示姓名变化比较简单的方式。\n<em>在组件类中</em>订阅表单控件属性变化的可观察对象以触发应用逻辑则是比较难的方式。</p>\n<a id=\"save\"></a>\n<h2 translation-origin=\"off\" id=\"save-form-data\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#save-form-data\"><i class=\"material-icons\">link</i></a>Save form data</h2>\n<h2 translation-result=\"\" id=\"保存表单数据\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#保存表单数据\"><i class=\"material-icons\">link</i></a>保存表单数据</h2>\n<p translation-origin=\"off\">The <code>HeroDetailComponent</code> captures user input but it doesn't do anything with it.\nIn a real app, you'd probably save those hero changes.\nIn a real app, you'd also be able to revert unsaved changes and resume editing.\nAfter you implement both features in this section, the form will look like this:</p>\n<p translation-result=\"\"><code>HeroDetailComponent</code>捕获了用户输入，但没有用它做任何事。\n在真实的应用中，我们可能要保存这些英雄的变化。\n在真实的应用中，我们还要能丢弃未保存的变更，然后继续编辑。\n在实现完本节的这些特性之后，表单是这样的：</p>\n<figure>\n  <img src=\"generated/images/guide/reactive-forms/save-revert-buttons.png\" alt=\"Form with save &#x26; revert buttons\" width=\"389\" height=\"297\">\n</figure>\n<h3 translation-origin=\"off\" id=\"save\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#save\"><i class=\"material-icons\">link</i></a>Save</h3>\n<h3 translation-result=\"\" id=\"保存\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#保存\"><i class=\"material-icons\">link</i></a>保存</h3>\n<p translation-origin=\"off\">In this sample application, when the user submits the form,\nthe <code>HeroDetailComponent</code> will pass an instance of the hero <em>data model</em>\nto a save method on the injected <code>HeroService</code>.</p>\n<p translation-result=\"\">在这个范例应用中，当用户提交表单时，<code>HeroDetailComponent</code>会把英雄实例的<em>数据模型</em>传给所注入进来的<code>HeroService</code>的一个方法来进行保存。</p>\n<code-example path=\"reactive-forms/src/app/hero-detail.component.ts\" region=\"on-submit\" title=\"src/app/hero-detail.component.ts (onSubmit)\" linenums=\"false\">\nonSubmit() {\n  this.hero = this.prepareSaveHero();\n  this.heroService.updateHero(this.hero).subscribe(/* error handling */);\n  this.ngOnChanges();\n}\n\n</code-example>\n<p translation-origin=\"off\">This original <code>hero</code> had the pre-save values. The user's changes are still in the <em>form model</em>.\nSo you create a new <code>hero</code> from a combination of original hero values (the <code>hero.id</code>)\nand deep copies of the changed form model values, using the <code>prepareSaveHero</code> helper.</p>\n<p translation-result=\"\">原始的<code>hero</code>中有一些保存之前的值，用户的修改仍然是在<em>表单模型</em>中。\n所以我们要根据原始英雄（根据<code>hero.id</code>找到它）的值组合出一个新的<code>hero</code>对象，并用<code>prepareSaveHero</code>助手来深层复制变化后的模型值。</p>\n<code-example path=\"reactive-forms/src/app/hero-detail.component.ts\" region=\"prepare-save-hero\" title=\"src/app/hero-detail.component.ts (prepareSaveHero)\" linenums=\"false\">\nprepareSaveHero(): Hero {\n  const formModel = this.heroForm.value;\n\n  // deep copy of form model lairs\n  const secretLairsDeepCopy: Address[] = formModel.secretLairs.map(\n    (address: Address) => Object.assign({}, address)\n  );\n\n  // return new `Hero` object containing a combination of original hero value(s)\n  // and deep copies of changed form model values\n  const saveHero: Hero = {\n    id: this.hero.id,\n    name: formModel.name as string,\n    // addresses: formModel.secretLairs // &#x3C;-- bad!\n    addresses: secretLairsDeepCopy\n  };\n  return saveHero;\n}\n\n</code-example>\n<div class=\"l-sub-section\">\n<p translation-origin=\"off\"><strong>Address deep copy</strong></p>\n<p translation-result=\"\"><strong>地址的深层复制</strong></p>\n<p translation-origin=\"off\">Had you assigned the <code>formModel.secretLairs</code> to <code>saveHero.addresses</code> (see line commented out),\nthe addresses in <code>saveHero.addresses</code> array would be the same objects\nas the lairs in the <code>formModel.secretLairs</code>.\nA user's subsequent changes to a lair street would mutate an address street in the <code>saveHero</code>.</p>\n<p translation-result=\"\">我们已经把<code>formModel.secretLairs</code>赋值给了<code>saveHero.addresses</code>（参见注释掉的部分），\n<code>saveHero.addresses</code>数组中的地址和<code>formModel.secretLairs</code>中的会是同一个对象。\n用户随后对小屋所在街道的修改将会改变<code>saveHero</code>中的街道地址。</p>\n<p translation-origin=\"off\">The <code>prepareSaveHero</code> method makes copies of the form model's <code>secretLairs</code> objects so that can't happen.</p>\n<p translation-result=\"\">但<code>prepareSaveHero</code>方法会制作表单模型中的<code>secretLairs</code>对象的复本，因此实际上并没有修改原有对象。</p>\n</div>\n<h3 translation-origin=\"off\" id=\"revert-cancel-changes\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#revert-cancel-changes\"><i class=\"material-icons\">link</i></a>Revert (cancel changes)</h3>\n<h3 translation-result=\"\" id=\"丢弃（撤销修改）\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#丢弃（撤销修改）\"><i class=\"material-icons\">link</i></a>丢弃（撤销修改）</h3>\n<p translation-origin=\"off\">The user cancels changes and reverts the form to the original state by pressing the <em>Revert</em> button.</p>\n<p translation-result=\"\">用户可以撤销修改，并通过点击<em>Revert</em>按钮来把表单恢复到原始状态。</p>\n<p translation-origin=\"off\">Reverting is easy. Simply re-execute the <code>ngOnChanges</code> method that built the <em>form model</em> from the original, unchanged <code>hero</code> <em>data model</em>.</p>\n<p translation-result=\"\">丢弃很容易。只要重新执行<code>ngOnChanges</code>方法就可以拆而，它会重新从原始的、未修改过的<code>hero</code>数据模型来构建出<em>表单模型</em>。</p>\n<code-example path=\"reactive-forms/src/app/hero-detail.component.ts\" region=\"revert\" title=\"src/app/hero-detail.component.ts (revert)\" linenums=\"false\">\nrevert() { this.ngOnChanges(); }\n\n</code-example>\n<h3 translation-origin=\"off\" id=\"buttons\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#buttons\"><i class=\"material-icons\">link</i></a>Buttons</h3>\n<h3 translation-result=\"\" id=\"按钮\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#按钮\"><i class=\"material-icons\">link</i></a>按钮</h3>\n<p translation-origin=\"off\">Add the \"Save\" and \"Revert\" buttons near the top of the component's template:</p>\n<p translation-result=\"\">把“Save”和“Revert”按钮添加到组件模板的顶部：</p>\n<code-example path=\"reactive-forms/src/app/hero-detail.component.html\" region=\"buttons\" title=\"src/app/hero-detail.component.html (Save and Revert buttons)\" linenums=\"false\">\n&#x3C;form [formGroup]=\"heroForm\" (ngSubmit)=\"onSubmit()\" novalidate>\n  &#x3C;div style=\"margin-bottom: 1em\">\n    &#x3C;button type=\"submit\"\n            [disabled]=\"heroForm.pristine\" class=\"btn btn-success\">Save&#x3C;/button> &#x26;nbsp;\n    &#x3C;button type=\"reset\" (click)=\"revert()\"\n            [disabled]=\"heroForm.pristine\" class=\"btn btn-danger\">Revert&#x3C;/button>\n  &#x3C;/div>\n\n  &#x3C;!-- Hero Detail Controls -->\n  &#x3C;div class=\"form-group radio\">\n    &#x3C;h4>Super power:&#x3C;/h4>\n    &#x3C;label class=\"center-block\">&#x3C;input type=\"radio\" formControlName=\"power\" value=\"flight\">Flight&#x3C;/label>\n    &#x3C;label class=\"center-block\">&#x3C;input type=\"radio\" formControlName=\"power\" value=\"x-ray vision\">X-ray vision&#x3C;/label>\n    &#x3C;label class=\"center-block\">&#x3C;input type=\"radio\" formControlName=\"power\" value=\"strength\">Strength&#x3C;/label>\n  &#x3C;/div>\n  &#x3C;div class=\"checkbox\">\n    &#x3C;label class=\"center-block\">\n      &#x3C;input type=\"checkbox\" formControlName=\"sidekick\">I have a sidekick.\n    &#x3C;/label>\n  &#x3C;/div>\n&#x3C;/form>\n\n</code-example>\n<p translation-origin=\"off\">The buttons are disabled until the user \"dirties\" the form by changing a value in any of its form controls (<code>heroForm.dirty</code>).</p>\n<p translation-result=\"\">这些按钮默认是禁用的，直到用户通过修改任何一个表单控件的值“弄脏”了表单中的数据（即<code>heroForm.dirty</code>）。</p>\n<p translation-origin=\"off\">Clicking a button of type <code>\"submit\"</code> triggers the <code>ngSubmit</code> event which calls the component's <code>onSubmit</code> method.\nClicking the revert button triggers a call to the component's <code>revert</code> method.\nUsers now can save or revert changes.</p>\n<p translation-result=\"\">点击一个类型为<code>\"submit\"</code>的按钮会触发<code>ngSubmit</code>事件，而它会调用组件的<code>onSubmit</code>方法。\n点击“Revert”按钮则会调用组件的<code>revert</code>方法。\n现在，用户可以保存或放弃修改了。</p>\n<p translation-origin=\"off\">This is the final step in the demo.\nTry the <live-example plnkr=\"final\" title=\"Reactive Forms (final) in Plunker\"></live-example>.</p>\n<p translation-result=\"\">这是本演示的最后一步。\n去试试<live-example plnkr=\"final\" title=\"Reactive Forms (final) in Plunker\"></live-example>吧。</p>\n<h2 translation-origin=\"off\" id=\"conclusion\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#conclusion\"><i class=\"material-icons\">link</i></a>Conclusion</h2>\n<h2 translation-result=\"\" id=\"总结\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/reactive-forms#总结\"><i class=\"material-icons\">link</i></a>总结</h2>\n<p translation-origin=\"off\">This page covered:</p>\n<p translation-result=\"\">本章包括：</p>\n<ul>\n<li>\n<p translation-origin=\"off\">How to create a reactive form component and its corresponding template.</p>\n<p translation-result=\"\">如何创建一个响应式表单控件及其对应的模板。</p>\n</li>\n<li>\n<p translation-origin=\"off\">How to use <code><a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a></code> to simplify coding a reactive form.</p>\n<p translation-result=\"\">如何使用<code><a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a></code>来简化响应式表单的编码工作。</p>\n</li>\n<li>\n<p translation-origin=\"off\">Grouping <code>FormControls</code>.</p>\n<p translation-result=\"\">分组<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>。</p>\n</li>\n<li>\n<p translation-origin=\"off\">Inspecting <code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code> properties.</p>\n<p translation-result=\"\">审查<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>的属性。</p>\n</li>\n<li>\n<p translation-origin=\"off\">Setting data with <code>patchValue</code> and <code>setValue</code>.</p>\n<p translation-result=\"\">使用<code>patchValue</code>和<code>setValue</code>设置数据。</p>\n</li>\n<li>\n<p translation-origin=\"off\">Adding groups dynamically with <code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code>.</p>\n<p translation-result=\"\">使用<code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code>动态添加控件组。</p>\n</li>\n<li>\n<p translation-origin=\"off\">Observing changes to the value of a <code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>.</p>\n<p translation-result=\"\">监听<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code>中值的变化。</p>\n</li>\n<li>\n<p translation-origin=\"off\">Saving form changes.</p>\n<p translation-result=\"\">保存表单中的更改。</p>\n</li>\n</ul>\n<a id=\"source-code\"></a>\n<p translation-origin=\"off\">The key files of the final version are as follows:</p>\n<p translation-result=\"\">最终版中的核心文件如下：</p>\n<code-tabs>\n\n  <code-pane title=\"src/app/app.component.ts\" path=\"reactive-forms/src/app/app.component.ts\">\nimport { <a href=\"api/core/Component\" class=\"code-anchor\">Component</a> } from '@angular/core';\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-root',\n  template: `\n  &#x3C;div class=\"container\">\n    &#x3C;h1>Reactive Forms&#x3C;/h1>\n    &#x3C;app-hero-list>&#x3C;/app-hero-list>\n  &#x3C;/div>`\n})\nexport class AppComponent { }\n\n\n</code-pane>\n\n  <code-pane title=\"src/app/app.module.ts\" path=\"reactive-forms/src/app/app.module.ts\">\nimport { <a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a> }            from '@angular/core';\nimport { <a href=\"api/platform-browser/BrowserModule\" class=\"code-anchor\">BrowserModule</a> }       from '@angular/platform-<a href=\"api/animations/browser\" class=\"code-anchor\">browser</a>';\nimport { <a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a> } from '@angular/forms';  // &#x3C;-- #1 import module\n\nimport { AppComponent }        from './app.component';\nimport { HeroDetailComponent } from './hero-detail.component'; // &#x3C;-- #1 import component\nimport { HeroListComponent }   from './hero-list.component';\n\nimport { HeroService }         from './hero.service'; //  &#x3C;-- #1 import service\n\n@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>({\n  imports: [\n    <a href=\"api/platform-browser/BrowserModule\" class=\"code-anchor\">BrowserModule</a>,\n    <a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a> // &#x3C;-- #2 add to @<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a> imports\n  ],\n  declarations: [\n    AppComponent,\n    HeroDetailComponent, // &#x3C;-- #3 declare app component\n    HeroListComponent\n  ],\n  exports: [ // export for the DemoModule\n    AppComponent,\n    HeroDetailComponent,\n    HeroListComponent\n  ],\n  providers: [ HeroService ], // &#x3C;-- #4 provide HeroService\n  bootstrap: [ AppComponent ]\n})\nexport class AppModule { }\n\n\n</code-pane>\n\n  <code-pane title=\"src/app/hero-detail.component.ts\" path=\"reactive-forms/src/app/hero-detail.component.ts\">\nimport { <a href=\"api/core/Component\" class=\"code-anchor\">Component</a>, <a href=\"api/core/Input\" class=\"code-anchor\">Input</a>, <a href=\"api/core/OnChanges\" class=\"code-anchor\">OnChanges</a> }       from '@angular/core';\nimport { <a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a>, <a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a>, <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a> } from '@angular/forms';\n\nimport { Address, Hero, states } from './data-model';\nimport { HeroService }           from './hero.service';\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-hero-detail',\n  templateUrl: './hero-detail.component.html'\n})\nexport class HeroDetailComponent implements <a href=\"api/core/OnChanges\" class=\"code-anchor\">OnChanges</a> {\n  @<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>() hero: Hero;\n\n  heroForm: <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a>;\n  nameChangeLog: string[] = [];\n  states = states;\n\n  constructor(\n    private fb: <a href=\"api/forms/FormBuilder\" class=\"code-anchor\">FormBuilder</a>,\n    private heroService: HeroService) {\n\n    this.createForm();\n    this.logNameChange();\n  }\n\n  createForm() {\n    this.heroForm = this.fb.group({\n      name: '',\n      secretLairs: this.fb.array([]),\n      power: '',\n      sidekick: ''\n    });\n  }\n\n  ngOnChanges() {\n    this.heroForm.reset({\n      name: this.hero.name\n    });\n    this.setAddresses(this.hero.addresses);\n  }\n\n  get secretLairs(): <a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a> {\n    return this.heroForm.get('secretLairs') as <a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a>;\n  };\n\n  setAddresses(addresses: Address[]) {\n    const addressFGs = addresses.map(address => this.fb.group(address));\n    const addressFormArray = this.fb.array(addressFGs);\n    this.heroForm.setControl('secretLairs', addressFormArray);\n  }\n\n  addLair() {\n    this.secretLairs.push(this.fb.group(new Address()));\n  }\n\n  onSubmit() {\n    this.hero = this.prepareSaveHero();\n    this.heroService.updateHero(this.hero).subscribe(/* error handling */);\n    this.ngOnChanges();\n  }\n\n  prepareSaveHero(): Hero {\n    const formModel = this.heroForm.value;\n\n    // deep copy of form model lairs\n    const secretLairsDeepCopy: Address[] = formModel.secretLairs.map(\n      (address: Address) => Object.assign({}, address)\n    );\n\n    // return new `Hero` object containing a combination of original hero value(s)\n    // and deep copies of changed form model values\n    const saveHero: Hero = {\n      id: this.hero.id,\n      name: formModel.name as string,\n      // addresses: formModel.secretLairs // &#x3C;-- bad!\n      addresses: secretLairsDeepCopy\n    };\n    return saveHero;\n  }\n\n  revert() { this.ngOnChanges(); }\n\n  logNameChange() {\n    const nameControl = this.heroForm.get('name');\n    nameControl.valueChanges.forEach(\n      (value: string) => this.nameChangeLog.push(value)\n    );\n  }\n}\n\n\n</code-pane>\n\n  <code-pane title=\"src/app/hero-detail.component.html\" path=\"reactive-forms/src/app/hero-detail.component.html\">\n&#x3C;form [formGroup]=\"heroForm\" (ngSubmit)=\"onSubmit()\" novalidate>\n  &#x3C;div style=\"margin-bottom: 1em\">\n    &#x3C;button type=\"submit\"\n            [disabled]=\"heroForm.pristine\" class=\"btn btn-success\">Save&#x3C;/button> &#x26;nbsp;\n    &#x3C;button type=\"reset\" (click)=\"revert()\"\n            [disabled]=\"heroForm.pristine\" class=\"btn btn-danger\">Revert&#x3C;/button>\n  &#x3C;/div>\n\n  &#x3C;!-- Hero Detail Controls -->\n  &#x3C;div class=\"form-group\">\n      &#x3C;label class=\"center-block\">Name:\n        &#x3C;input class=\"form-control\" formControlName=\"name\">\n      &#x3C;/label>\n  &#x3C;/div>\n\n  &#x3C;div formArrayName=\"secretLairs\" class=\"well well-lg\">\n    &#x3C;div *ngFor=\"let address of secretLairs.controls; let i=index\" [formGroupName]=\"i\" >\n      &#x3C;!-- The repeated address template -->\n      &#x3C;h4>Address #{{i + 1}}&#x3C;/h4>\n      &#x3C;div style=\"margin-left: 1em;\">\n        &#x3C;div class=\"form-group\">\n          &#x3C;label class=\"center-block\">Street:\n            &#x3C;input class=\"form-control\" formControlName=\"street\">\n          &#x3C;/label>\n        &#x3C;/div>\n        &#x3C;div class=\"form-group\">\n          &#x3C;label class=\"center-block\">City:\n            &#x3C;input class=\"form-control\" formControlName=\"city\">\n          &#x3C;/label>\n        &#x3C;/div>\n        &#x3C;div class=\"form-group\">\n          &#x3C;label class=\"center-block\">State:\n            &#x3C;select class=\"form-control\" formControlName=\"state\">\n              &#x3C;<a href=\"api/forms/NgSelectOption\" class=\"code-anchor\">option</a> *ngFor=\"let state of states\" [value]=\"state\">{{state}}&#x3C;/<a href=\"api/forms/NgSelectOption\" class=\"code-anchor\">option</a>>\n            &#x3C;/select>\n          &#x3C;/label>\n        &#x3C;/div>\n        &#x3C;div class=\"form-group\">\n          &#x3C;label class=\"center-block\">Zip Code:\n            &#x3C;input class=\"form-control\" formControlName=\"zip\">\n          &#x3C;/label>\n        &#x3C;/div>\n      &#x3C;/div>\n      &#x3C;br>\n      &#x3C;!-- End of the repeated address template -->\n    &#x3C;/div>\n    &#x3C;button (click)=\"addLair()\" type=\"button\">Add a Secret Lair&#x3C;/button>\n  &#x3C;/div>\n  &#x3C;div class=\"form-group radio\">\n    &#x3C;h4>Super power:&#x3C;/h4>\n    &#x3C;label class=\"center-block\">&#x3C;input type=\"radio\" formControlName=\"power\" value=\"flight\">Flight&#x3C;/label>\n    &#x3C;label class=\"center-block\">&#x3C;input type=\"radio\" formControlName=\"power\" value=\"x-ray vision\">X-ray vision&#x3C;/label>\n    &#x3C;label class=\"center-block\">&#x3C;input type=\"radio\" formControlName=\"power\" value=\"strength\">Strength&#x3C;/label>\n  &#x3C;/div>\n  &#x3C;div class=\"checkbox\">\n    &#x3C;label class=\"center-block\">\n      &#x3C;input type=\"checkbox\" formControlName=\"sidekick\">I have a sidekick.\n    &#x3C;/label>\n  &#x3C;/div>\n&#x3C;/form>\n\n&#x3C;p>heroForm value: {{ heroForm.value | <a href=\"api/common/JsonPipe\" class=\"code-anchor\">json</a>}}&#x3C;/p>\n\n&#x3C;h4>Name change log&#x3C;/h4>\n&#x3C;div *ngFor=\"let name of nameChangeLog\">{{name}}&#x3C;/div>\n\n\n</code-pane>\n\n  <code-pane title=\"src/app/hero-list.component.html\" path=\"reactive-forms/src/app/hero-list.component.html\">\n&#x3C;h3 *<a href=\"api/common/NgIf\" class=\"code-anchor\">ngIf</a>=\"isLoading\">&#x3C;i>Loading heroes ... &#x3C;/i>&#x3C;/h3>\n&#x3C;h3 *<a href=\"api/common/NgIf\" class=\"code-anchor\">ngIf</a>=\"!isLoading\">Select a hero:&#x3C;/h3>\n\n&#x3C;nav>\n  &#x3C;button (click)=\"getHeroes()\" class=\"btn btn-primary\">Refresh&#x3C;/button>\n  &#x3C;a *ngFor=\"let hero of heroes | async\" (click)=\"select(hero)\">{{hero.name}}&#x3C;/a>\n&#x3C;/nav>\n\n&#x3C;div *<a href=\"api/common/NgIf\" class=\"code-anchor\">ngIf</a>=\"selectedHero\">\n  &#x3C;hr>\n  &#x3C;h2>Hero Detail&#x3C;/h2>\n  &#x3C;h3>Editing: {{selectedHero.name}}&#x3C;/h3>\n  &#x3C;app-hero-detail [hero]=\"selectedHero\">&#x3C;/app-hero-detail>\n&#x3C;/div>\n\n\n</code-pane>\n\n  <code-pane title=\"src/app/hero-list.component.ts\" path=\"reactive-forms/src/app/hero-list.component.ts\">\nimport { <a href=\"api/core/Component\" class=\"code-anchor\">Component</a>, <a href=\"api/core/OnInit\" class=\"code-anchor\">OnInit</a> } from '@angular/core';\nimport { Observable }        from 'rxjs/Observable';\nimport 'rxjs/add/operator/finally';\n\nimport { Hero }        from './data-model';\nimport { HeroService } from './hero.service';\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-hero-list',\n  templateUrl: './hero-list.component.html'\n})\nexport class HeroListComponent implements <a href=\"api/core/OnInit\" class=\"code-anchor\">OnInit</a> {\n  heroes: Observable&#x3C;Hero[]>;\n  isLoading = false;\n  selectedHero: Hero;\n\n  constructor(private heroService: HeroService) { }\n\n  ngOnInit() { this.getHeroes(); }\n\n  getHeroes() {\n    this.isLoading = true;\n    this.heroes = this.heroService.getHeroes()\n                      // Todo: error handling\n                      .finally(() => this.isLoading = false);\n    this.selectedHero = undefined;\n  }\n\n  select(hero: Hero) { this.selectedHero = hero; }\n}\n\n\n</code-pane>\n\n  <code-pane title=\"src/app/data-model.ts\" path=\"reactive-forms/src/app/data-model.ts\">\nexport class Hero {\n  id = 0;\n  name = '';\n  addresses: Address[];\n}\n\nexport class Address {\n  street = '';\n  city   = '';\n  state  = '';\n  zip    = '';\n}\n\nexport const heroes: Hero[] = [\n  {\n    id: 1,\n    name: 'Whirlwind',\n    addresses: [\n      {street: '123 Main',  city: 'Anywhere', state: 'CA',  zip: '94801'},\n      {street: '456 Maple', city: 'Somewhere', state: 'VA', zip: '23226'},\n    ]\n  },\n  {\n    id: 2,\n    name: 'Bombastic',\n    addresses: [\n      {street: '789 Elm',  city: 'Smallville', state: 'OH',  zip: '04501'},\n    ]\n  },\n  {\n    id: 3,\n    name: 'Magneta',\n    addresses: [ ]\n  },\n];\n\nexport const states = ['CA', 'MD', 'OH', 'VA'];\n\n\n</code-pane>\n\n  <code-pane title=\"src/app/hero.service.ts\" path=\"reactive-forms/src/app/hero.service.ts\">\nimport { <a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a> } from '@angular/core';\n\nimport { Observable } from 'rxjs/Observable';\nimport { of }         from 'rxjs/observable/of';\nimport 'rxjs/add/operator/delay';\n\nimport { Hero, heroes } from './data-model';\n\n@<a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a>()\nexport class HeroService {\n\n  delayMs = 500;\n\n  // Fake server get; assume nothing can go wrong\n  getHeroes(): Observable&#x3C;Hero[]> {\n    return of(heroes).delay(this.delayMs); // simulate latency with delay\n  }\n\n  // Fake server update; assume nothing can go wrong\n  updateHero(hero: Hero): Observable&#x3C;Hero>  {\n    const oldHero = heroes.find(h => h.id === hero.id);\n    const newHero = Object.assign(oldHero, hero); // Demo: mutate cached hero\n    return of(newHero).delay(this.delayMs); // simulate latency with delay\n  }\n}\n\n\n</code-pane>\n\n</code-tabs>\n<p translation-origin=\"off\">You can download the complete source for all steps in this guide\nfrom the <live-example title=\"Reactive Forms Demo in Plunker\">Reactive Forms Demo</live-example> live example.</p>\n<p translation-result=\"\">你可以到<live-example title=\"Reactive Forms Demo in Plunker\">响应式表单在线例子</live-example>中下载本章所有步骤的完整代码。</p>\n\n</div>"
}